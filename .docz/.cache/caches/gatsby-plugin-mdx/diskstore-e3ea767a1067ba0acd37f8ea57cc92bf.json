{"expireTime":9007200985218040000,"key":"gatsby-plugin-mdx-entire-payload-2f456ac028c59a927003a8f4505aa24a-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"C:/wamp64/www/laravel_training/node_modules/gatsby-theme-docz/src/base/Layout.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":109,"offset":110},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":112},"end":{"line":5,"column":29,"offset":140},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Guzzle Promises","position":{"start":{"line":7,"column":3,"offset":144},"end":{"line":7,"column":18,"offset":159},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":142},"end":{"line":7,"column":18,"offset":159},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://promisesaplus.com/","children":[{"type":"text","value":"Promises/A+","position":{"start":{"line":9,"column":2,"offset":162},"end":{"line":9,"column":13,"offset":173},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":161},"end":{"line":9,"column":42,"offset":202},"indent":[]}},{"type":"text","value":" implementation that handles promise\nchaining and resolution iteratively, allowing for \"infinite\" promise chaining\nwhile keeping the stack size constant. Read ","position":{"start":{"line":9,"column":42,"offset":202},"end":{"line":11,"column":45,"offset":361},"indent":[1,1]}},{"type":"link","title":null,"url":"https://blog.domenic.me/youre-missing-the-point-of-promises/","children":[{"type":"text","value":"this blog post","position":{"start":{"line":11,"column":46,"offset":362},"end":{"line":11,"column":60,"offset":376},"indent":[]}}],"position":{"start":{"line":11,"column":45,"offset":361},"end":{"line":11,"column":123,"offset":439},"indent":[]}},{"type":"text","value":"\nfor a general introduction to promises.","position":{"start":{"line":11,"column":123,"offset":439},"end":{"line":12,"column":40,"offset":479},"indent":[1]}}],"position":{"start":{"line":9,"column":1,"offset":161},"end":{"line":12,"column":40,"offset":479},"indent":[1,1,1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#features","children":[{"type":"text","value":"Features","position":{"start":{"line":14,"column":4,"offset":484},"end":{"line":14,"column":12,"offset":492},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":483},"end":{"line":14,"column":24,"offset":504},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":483},"end":{"line":14,"column":24,"offset":504},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":481},"end":{"line":14,"column":24,"offset":504},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#quick-start","children":[{"type":"text","value":"Quick start","position":{"start":{"line":15,"column":4,"offset":508},"end":{"line":15,"column":15,"offset":519},"indent":[]}}],"position":{"start":{"line":15,"column":3,"offset":507},"end":{"line":15,"column":30,"offset":534},"indent":[]}}],"position":{"start":{"line":15,"column":3,"offset":507},"end":{"line":15,"column":30,"offset":534},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":505},"end":{"line":15,"column":30,"offset":534},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#synchronous-wait","children":[{"type":"text","value":"Synchronous wait","position":{"start":{"line":16,"column":4,"offset":538},"end":{"line":16,"column":20,"offset":554},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":537},"end":{"line":16,"column":40,"offset":574},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":537},"end":{"line":16,"column":40,"offset":574},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":535},"end":{"line":16,"column":40,"offset":574},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#cancellation","children":[{"type":"text","value":"Cancellation","position":{"start":{"line":17,"column":4,"offset":578},"end":{"line":17,"column":16,"offset":590},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":577},"end":{"line":17,"column":32,"offset":606},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":577},"end":{"line":17,"column":32,"offset":606},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":575},"end":{"line":17,"column":32,"offset":606},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#api","children":[{"type":"text","value":"API","position":{"start":{"line":18,"column":4,"offset":610},"end":{"line":18,"column":7,"offset":613},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":609},"end":{"line":18,"column":14,"offset":620},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":609},"end":{"line":18,"column":14,"offset":620},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#promise","children":[{"type":"text","value":"Promise","position":{"start":{"line":19,"column":6,"offset":626},"end":{"line":19,"column":13,"offset":633},"indent":[]}}],"position":{"start":{"line":19,"column":5,"offset":625},"end":{"line":19,"column":24,"offset":644},"indent":[]}}],"position":{"start":{"line":19,"column":5,"offset":625},"end":{"line":19,"column":24,"offset":644},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":623},"end":{"line":19,"column":24,"offset":644},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#fulfilledpromise","children":[{"type":"text","value":"FulfilledPromise","position":{"start":{"line":20,"column":6,"offset":650},"end":{"line":20,"column":22,"offset":666},"indent":[]}}],"position":{"start":{"line":20,"column":5,"offset":649},"end":{"line":20,"column":42,"offset":686},"indent":[]}}],"position":{"start":{"line":20,"column":5,"offset":649},"end":{"line":20,"column":42,"offset":686},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":647},"end":{"line":20,"column":42,"offset":686},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#rejectedpromise","children":[{"type":"text","value":"RejectedPromise","position":{"start":{"line":21,"column":6,"offset":692},"end":{"line":21,"column":21,"offset":707},"indent":[]}}],"position":{"start":{"line":21,"column":5,"offset":691},"end":{"line":21,"column":40,"offset":726},"indent":[]}}],"position":{"start":{"line":21,"column":5,"offset":691},"end":{"line":21,"column":40,"offset":726},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":689},"end":{"line":21,"column":40,"offset":726},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":623},"end":{"line":21,"column":40,"offset":726},"indent":[3,3]}}],"position":{"start":{"line":18,"column":1,"offset":607},"end":{"line":21,"column":40,"offset":726},"indent":[1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#promise-interop","children":[{"type":"text","value":"Promise interop","position":{"start":{"line":22,"column":4,"offset":730},"end":{"line":22,"column":19,"offset":745},"indent":[]}}],"position":{"start":{"line":22,"column":3,"offset":729},"end":{"line":22,"column":38,"offset":764},"indent":[]}}],"position":{"start":{"line":22,"column":3,"offset":729},"end":{"line":22,"column":38,"offset":764},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":727},"end":{"line":22,"column":38,"offset":764},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#implementation-notes","children":[{"type":"text","value":"Implementation notes","position":{"start":{"line":23,"column":4,"offset":768},"end":{"line":23,"column":24,"offset":788},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":767},"end":{"line":23,"column":48,"offset":812},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":767},"end":{"line":23,"column":48,"offset":812},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":765},"end":{"line":23,"column":48,"offset":812},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":481},"end":{"line":23,"column":48,"offset":812},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Features","position":{"start":{"line":26,"column":4,"offset":818},"end":{"line":26,"column":12,"offset":826},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":815},"end":{"line":26,"column":12,"offset":826},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://promisesaplus.com/","children":[{"type":"text","value":"Promises/A+","position":{"start":{"line":28,"column":4,"offset":831},"end":{"line":28,"column":15,"offset":842},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":830},"end":{"line":28,"column":44,"offset":871},"indent":[]}},{"type":"text","value":" implementation.","position":{"start":{"line":28,"column":44,"offset":871},"end":{"line":28,"column":60,"offset":887},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":830},"end":{"line":28,"column":60,"offset":887},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":828},"end":{"line":28,"column":60,"offset":887},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Promise resolution and chaining is handled iteratively, allowing for\n\"infinite\" promise chaining.","position":{"start":{"line":29,"column":3,"offset":890},"end":{"line":30,"column":31,"offset":989},"indent":[3]}}],"position":{"start":{"line":29,"column":3,"offset":890},"end":{"line":30,"column":31,"offset":989},"indent":[3]}}],"position":{"start":{"line":29,"column":1,"offset":888},"end":{"line":30,"column":31,"offset":989},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Promises have a synchronous ","position":{"start":{"line":31,"column":3,"offset":992},"end":{"line":31,"column":31,"offset":1020},"indent":[]}},{"type":"inlineCode","value":"wait","position":{"start":{"line":31,"column":31,"offset":1020},"end":{"line":31,"column":37,"offset":1026},"indent":[]}},{"type":"text","value":" method.","position":{"start":{"line":31,"column":37,"offset":1026},"end":{"line":31,"column":45,"offset":1034},"indent":[]}}],"position":{"start":{"line":31,"column":3,"offset":992},"end":{"line":31,"column":45,"offset":1034},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":990},"end":{"line":31,"column":45,"offset":1034},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Promises can be cancelled.","position":{"start":{"line":32,"column":3,"offset":1037},"end":{"line":32,"column":29,"offset":1063},"indent":[]}}],"position":{"start":{"line":32,"column":3,"offset":1037},"end":{"line":32,"column":29,"offset":1063},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":1035},"end":{"line":32,"column":29,"offset":1063},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Works with any object that has a ","position":{"start":{"line":33,"column":3,"offset":1066},"end":{"line":33,"column":36,"offset":1099},"indent":[]}},{"type":"inlineCode","value":"then","position":{"start":{"line":33,"column":36,"offset":1099},"end":{"line":33,"column":42,"offset":1105},"indent":[]}},{"type":"text","value":" function.","position":{"start":{"line":33,"column":42,"offset":1105},"end":{"line":33,"column":52,"offset":1115},"indent":[]}}],"position":{"start":{"line":33,"column":3,"offset":1066},"end":{"line":33,"column":52,"offset":1115},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1064},"end":{"line":33,"column":52,"offset":1115},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"C# style async/await coroutine promises using\n","position":{"start":{"line":34,"column":3,"offset":1118},"end":{"line":35,"column":3,"offset":1166},"indent":[3]}},{"type":"inlineCode","value":"GuzzleHttp\\Promise\\Coroutine::of()","position":{"start":{"line":35,"column":3,"offset":1166},"end":{"line":35,"column":39,"offset":1202},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":35,"column":39,"offset":1202},"end":{"line":35,"column":40,"offset":1203},"indent":[]}}],"position":{"start":{"line":34,"column":3,"offset":1118},"end":{"line":35,"column":40,"offset":1203},"indent":[3]}}],"position":{"start":{"line":34,"column":1,"offset":1116},"end":{"line":35,"column":40,"offset":1203},"indent":[1]}}],"position":{"start":{"line":28,"column":1,"offset":828},"end":{"line":35,"column":40,"offset":1203},"indent":[1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Installation","position":{"start":{"line":38,"column":4,"offset":1209},"end":{"line":38,"column":16,"offset":1221},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":1206},"end":{"line":38,"column":16,"offset":1221},"indent":[]}},{"type":"code","lang":"shell","meta":null,"value":"composer require guzzlehttp/promises","position":{"start":{"line":40,"column":1,"offset":1223},"end":{"line":42,"column":4,"offset":1272},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Version Guidance","position":{"start":{"line":45,"column":4,"offset":1278},"end":{"line":45,"column":20,"offset":1294},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":1275},"end":{"line":45,"column":20,"offset":1294},"indent":[]}},{"type":"table","align":[null,null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Version","position":{"start":{"line":47,"column":3,"offset":1298},"end":{"line":47,"column":10,"offset":1305},"indent":[]}}],"position":{"start":{"line":47,"column":3,"offset":1298},"end":{"line":47,"column":10,"offset":1305},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Status","position":{"start":{"line":47,"column":13,"offset":1308},"end":{"line":47,"column":19,"offset":1314},"indent":[]}}],"position":{"start":{"line":47,"column":13,"offset":1308},"end":{"line":47,"column":32,"offset":1327},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"PHP Version","position":{"start":{"line":47,"column":35,"offset":1330},"end":{"line":47,"column":46,"offset":1341},"indent":[]}}],"position":{"start":{"line":47,"column":35,"offset":1330},"end":{"line":47,"column":47,"offset":1342},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1296},"end":{"line":47,"column":49,"offset":1344},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"1.x","position":{"start":{"line":49,"column":3,"offset":1396},"end":{"line":49,"column":6,"offset":1399},"indent":[]}}],"position":{"start":{"line":49,"column":3,"offset":1396},"end":{"line":49,"column":10,"offset":1403},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Security fixes only","position":{"start":{"line":49,"column":13,"offset":1406},"end":{"line":49,"column":32,"offset":1425},"indent":[]}}],"position":{"start":{"line":49,"column":13,"offset":1406},"end":{"line":49,"column":32,"offset":1425},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":">=5.5,<8.3","position":{"start":{"line":49,"column":35,"offset":1428},"end":{"line":49,"column":45,"offset":1438},"indent":[]}}],"position":{"start":{"line":49,"column":35,"offset":1428},"end":{"line":49,"column":47,"offset":1440},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":1394},"end":{"line":49,"column":49,"offset":1442},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"2.x","position":{"start":{"line":50,"column":3,"offset":1445},"end":{"line":50,"column":6,"offset":1448},"indent":[]}}],"position":{"start":{"line":50,"column":3,"offset":1445},"end":{"line":50,"column":10,"offset":1452},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Latest","position":{"start":{"line":50,"column":13,"offset":1455},"end":{"line":50,"column":19,"offset":1461},"indent":[]}}],"position":{"start":{"line":50,"column":13,"offset":1455},"end":{"line":50,"column":32,"offset":1474},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":">=7.2.5,<8.5","position":{"start":{"line":50,"column":35,"offset":1477},"end":{"line":50,"column":47,"offset":1489},"indent":[]}}],"position":{"start":{"line":50,"column":35,"offset":1477},"end":{"line":50,"column":47,"offset":1489},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":1443},"end":{"line":50,"column":49,"offset":1491},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1296},"end":{"line":50,"column":49,"offset":1491},"indent":[1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Quick Start","position":{"start":{"line":53,"column":4,"offset":1497},"end":{"line":53,"column":15,"offset":1508},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":1494},"end":{"line":53,"column":15,"offset":1508},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":55,"column":1,"offset":1510},"end":{"line":55,"column":3,"offset":1512},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"promise","position":{"start":{"line":55,"column":4,"offset":1513},"end":{"line":55,"column":11,"offset":1520},"indent":[]}}],"position":{"start":{"line":55,"column":3,"offset":1512},"end":{"line":55,"column":12,"offset":1521},"indent":[]}},{"type":"text","value":" represents the eventual result of an asynchronous operation. The\nprimary way of interacting with a promise is through its ","position":{"start":{"line":55,"column":12,"offset":1521},"end":{"line":56,"column":58,"offset":1644},"indent":[1]}},{"type":"inlineCode","value":"then","position":{"start":{"line":56,"column":58,"offset":1644},"end":{"line":56,"column":64,"offset":1650},"indent":[]}},{"type":"text","value":" method, which\nregisters callbacks to receive either a promise's eventual value or the reason\nwhy the promise cannot be fulfilled.","position":{"start":{"line":56,"column":64,"offset":1650},"end":{"line":58,"column":37,"offset":1780},"indent":[1,1]}}],"position":{"start":{"line":55,"column":1,"offset":1510},"end":{"line":58,"column":37,"offset":1780},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Callbacks","position":{"start":{"line":60,"column":5,"offset":1786},"end":{"line":60,"column":14,"offset":1795},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":1782},"end":{"line":60,"column":14,"offset":1795},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Callbacks are registered with the ","position":{"start":{"line":62,"column":1,"offset":1797},"end":{"line":62,"column":35,"offset":1831},"indent":[]}},{"type":"inlineCode","value":"then","position":{"start":{"line":62,"column":35,"offset":1831},"end":{"line":62,"column":41,"offset":1837},"indent":[]}},{"type":"text","value":" method by providing an optional \n","position":{"start":{"line":62,"column":41,"offset":1837},"end":{"line":63,"column":1,"offset":1871},"indent":[1]}},{"type":"inlineCode","value":"$onFulfilled","position":{"start":{"line":63,"column":1,"offset":1871},"end":{"line":63,"column":15,"offset":1885},"indent":[]}},{"type":"text","value":" followed by an optional ","position":{"start":{"line":63,"column":15,"offset":1885},"end":{"line":63,"column":40,"offset":1910},"indent":[]}},{"type":"inlineCode","value":"$onRejected","position":{"start":{"line":63,"column":40,"offset":1910},"end":{"line":63,"column":53,"offset":1923},"indent":[]}},{"type":"text","value":" function.","position":{"start":{"line":63,"column":53,"offset":1923},"end":{"line":63,"column":63,"offset":1933},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":1797},"end":{"line":63,"column":63,"offset":1933},"indent":[1]}},{"type":"code","lang":"php","meta":null,"value":"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$promise->then(\n    // $onFulfilled\n    function ($value) {\n        echo 'The promise was fulfilled.';\n    },\n    // $onRejected\n    function ($reason) {\n        echo 'The promise was rejected.';\n    }\n);","position":{"start":{"line":66,"column":1,"offset":1936},"end":{"line":80,"column":4,"offset":2210},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"Resolving","position":{"start":{"line":82,"column":2,"offset":2213},"end":{"line":82,"column":11,"offset":2222},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":2212},"end":{"line":82,"column":12,"offset":2223},"indent":[]}},{"type":"text","value":" a promise means that you either fulfill a promise with a ","position":{"start":{"line":82,"column":12,"offset":2223},"end":{"line":82,"column":70,"offset":2281},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"value","position":{"start":{"line":82,"column":71,"offset":2282},"end":{"line":82,"column":76,"offset":2287},"indent":[]}}],"position":{"start":{"line":82,"column":70,"offset":2281},"end":{"line":82,"column":77,"offset":2288},"indent":[]}},{"type":"text","value":" or\nreject a promise with a ","position":{"start":{"line":82,"column":77,"offset":2288},"end":{"line":83,"column":25,"offset":2316},"indent":[1]}},{"type":"emphasis","children":[{"type":"text","value":"reason","position":{"start":{"line":83,"column":26,"offset":2317},"end":{"line":83,"column":32,"offset":2323},"indent":[]}}],"position":{"start":{"line":83,"column":25,"offset":2316},"end":{"line":83,"column":33,"offset":2324},"indent":[]}},{"type":"text","value":". Resolving a promise triggers callbacks\nregistered with the promise's ","position":{"start":{"line":83,"column":33,"offset":2324},"end":{"line":84,"column":31,"offset":2395},"indent":[1]}},{"type":"inlineCode","value":"then","position":{"start":{"line":84,"column":31,"offset":2395},"end":{"line":84,"column":37,"offset":2401},"indent":[]}},{"type":"text","value":" method. These callbacks are triggered\nonly once and in the order in which they were added.","position":{"start":{"line":84,"column":37,"offset":2401},"end":{"line":85,"column":53,"offset":2492},"indent":[1]}}],"position":{"start":{"line":82,"column":1,"offset":2212},"end":{"line":85,"column":53,"offset":2492},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Resolving a Promise","position":{"start":{"line":87,"column":5,"offset":2498},"end":{"line":87,"column":24,"offset":2517},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":2494},"end":{"line":87,"column":24,"offset":2517},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Promises are fulfilled using the ","position":{"start":{"line":89,"column":1,"offset":2519},"end":{"line":89,"column":34,"offset":2552},"indent":[]}},{"type":"inlineCode","value":"resolve($value)","position":{"start":{"line":89,"column":34,"offset":2552},"end":{"line":89,"column":51,"offset":2569},"indent":[]}},{"type":"text","value":" method. Resolving a promise\nwith any value other than a ","position":{"start":{"line":89,"column":51,"offset":2569},"end":{"line":90,"column":29,"offset":2626},"indent":[1]}},{"type":"inlineCode","value":"GuzzleHttp\\Promise\\RejectedPromise","position":{"start":{"line":90,"column":29,"offset":2626},"end":{"line":90,"column":65,"offset":2662},"indent":[]}},{"type":"text","value":" will trigger\nall of the onFulfilled callbacks (resolving a promise with a rejected promise\nwill reject the promise and trigger the ","position":{"start":{"line":90,"column":65,"offset":2662},"end":{"line":92,"column":41,"offset":2794},"indent":[1,1]}},{"type":"inlineCode","value":"$onRejected","position":{"start":{"line":92,"column":41,"offset":2794},"end":{"line":92,"column":54,"offset":2807},"indent":[]}},{"type":"text","value":" callbacks).","position":{"start":{"line":92,"column":54,"offset":2807},"end":{"line":92,"column":66,"offset":2819},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":2519},"end":{"line":92,"column":66,"offset":2819},"indent":[1,1,1]}},{"type":"code","lang":"php","meta":null,"value":"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$promise\n    ->then(function ($value) {\n        // Return a value and don't break the chain\n        return \"Hello, \" . $value;\n    })\n    // This then is executed after the first then and receives the value\n    // returned from the first then.\n    ->then(function ($value) {\n        echo $value;\n    });\n\n// Resolving the promise triggers the $onFulfilled callbacks and outputs\n// \"Hello, reader.\"\n$promise->resolve('reader.');","position":{"start":{"line":94,"column":1,"offset":2821},"end":{"line":112,"column":4,"offset":3318},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Promise Forwarding","position":{"start":{"line":114,"column":5,"offset":3324},"end":{"line":114,"column":23,"offset":3342},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":3320},"end":{"line":114,"column":23,"offset":3342},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Promises can be chained one after the other. Each then in the chain is a new\npromise. The return value of a promise is what's forwarded to the next\npromise in the chain. Returning a promise in a ","position":{"start":{"line":116,"column":1,"offset":3344},"end":{"line":118,"column":48,"offset":3539},"indent":[1,1]}},{"type":"inlineCode","value":"then","position":{"start":{"line":118,"column":48,"offset":3539},"end":{"line":118,"column":54,"offset":3545},"indent":[]}},{"type":"text","value":" callback will cause the\nsubsequent promises in the chain to only be fulfilled when the returned promise\nhas been fulfilled. The next promise in the chain will be invoked with the\nresolved value of the promise.","position":{"start":{"line":118,"column":54,"offset":3545},"end":{"line":121,"column":31,"offset":3755},"indent":[1,1,1]}}],"position":{"start":{"line":116,"column":1,"offset":3344},"end":{"line":121,"column":31,"offset":3755},"indent":[1,1,1,1,1]}},{"type":"code","lang":"php","meta":null,"value":"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$nextPromise = new Promise();\n\n$promise\n    ->then(function ($value) use ($nextPromise) {\n        echo $value;\n        return $nextPromise;\n    })\n    ->then(function ($value) {\n        echo $value;\n    });\n\n// Triggers the first callback and outputs \"A\"\n$promise->resolve('A');\n// Triggers the second callback and outputs \"B\"\n$nextPromise->resolve('B');","position":{"start":{"line":123,"column":1,"offset":3757},"end":{"line":142,"column":4,"offset":4181},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Promise Rejection","position":{"start":{"line":144,"column":5,"offset":4187},"end":{"line":144,"column":22,"offset":4204},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":4183},"end":{"line":144,"column":22,"offset":4204},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When a promise is rejected, the ","position":{"start":{"line":146,"column":1,"offset":4206},"end":{"line":146,"column":33,"offset":4238},"indent":[]}},{"type":"inlineCode","value":"$onRejected","position":{"start":{"line":146,"column":33,"offset":4238},"end":{"line":146,"column":46,"offset":4251},"indent":[]}},{"type":"text","value":" callbacks are invoked with the\nrejection reason.","position":{"start":{"line":146,"column":46,"offset":4251},"end":{"line":147,"column":18,"offset":4300},"indent":[1]}}],"position":{"start":{"line":146,"column":1,"offset":4206},"end":{"line":147,"column":18,"offset":4300},"indent":[1]}},{"type":"code","lang":"php","meta":null,"value":"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$promise->then(null, function ($reason) {\n    echo $reason;\n});\n\n$promise->reject('Error!');\n// Outputs \"Error!\"","position":{"start":{"line":149,"column":1,"offset":4302},"end":{"line":159,"column":4,"offset":4484},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Rejection Forwarding","position":{"start":{"line":161,"column":5,"offset":4490},"end":{"line":161,"column":25,"offset":4510},"indent":[]}}],"position":{"start":{"line":161,"column":1,"offset":4486},"end":{"line":161,"column":25,"offset":4510},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If an exception is thrown in an ","position":{"start":{"line":163,"column":1,"offset":4512},"end":{"line":163,"column":33,"offset":4544},"indent":[]}},{"type":"inlineCode","value":"$onRejected","position":{"start":{"line":163,"column":33,"offset":4544},"end":{"line":163,"column":46,"offset":4557},"indent":[]}},{"type":"text","value":" callback, subsequent\n","position":{"start":{"line":163,"column":46,"offset":4557},"end":{"line":164,"column":1,"offset":4579},"indent":[1]}},{"type":"inlineCode","value":"$onRejected","position":{"start":{"line":164,"column":1,"offset":4579},"end":{"line":164,"column":14,"offset":4592},"indent":[]}},{"type":"text","value":" callbacks are invoked with the thrown exception as the reason.","position":{"start":{"line":164,"column":14,"offset":4592},"end":{"line":164,"column":77,"offset":4655},"indent":[]}}],"position":{"start":{"line":163,"column":1,"offset":4512},"end":{"line":164,"column":77,"offset":4655},"indent":[1]}},{"type":"code","lang":"php","meta":null,"value":"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$promise->then(null, function ($reason) {\n    throw new Exception($reason);\n})->then(null, function ($reason) {\n    assert($reason->getMessage() === 'Error!');\n});\n\n$promise->reject('Error!');","position":{"start":{"line":166,"column":1,"offset":4657},"end":{"line":177,"column":4,"offset":4919},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can also forward a rejection down the promise chain by returning a\n","position":{"start":{"line":179,"column":1,"offset":4921},"end":{"line":180,"column":1,"offset":4992},"indent":[1]}},{"type":"inlineCode","value":"GuzzleHttp\\Promise\\RejectedPromise","position":{"start":{"line":180,"column":1,"offset":4992},"end":{"line":180,"column":37,"offset":5028},"indent":[]}},{"type":"text","value":" in either an ","position":{"start":{"line":180,"column":37,"offset":5028},"end":{"line":180,"column":51,"offset":5042},"indent":[]}},{"type":"inlineCode","value":"$onFulfilled","position":{"start":{"line":180,"column":51,"offset":5042},"end":{"line":180,"column":65,"offset":5056},"indent":[]}},{"type":"text","value":" or\n","position":{"start":{"line":180,"column":65,"offset":5056},"end":{"line":181,"column":1,"offset":5060},"indent":[1]}},{"type":"inlineCode","value":"$onRejected","position":{"start":{"line":181,"column":1,"offset":5060},"end":{"line":181,"column":14,"offset":5073},"indent":[]}},{"type":"text","value":" callback.","position":{"start":{"line":181,"column":14,"offset":5073},"end":{"line":181,"column":24,"offset":5083},"indent":[]}}],"position":{"start":{"line":179,"column":1,"offset":4921},"end":{"line":181,"column":24,"offset":5083},"indent":[1,1]}},{"type":"code","lang":"php","meta":null,"value":"use GuzzleHttp\\Promise\\Promise;\nuse GuzzleHttp\\Promise\\RejectedPromise;\n\n$promise = new Promise();\n$promise->then(null, function ($reason) {\n    return new RejectedPromise($reason);\n})->then(null, function ($reason) {\n    assert($reason === 'Error!');\n});\n\n$promise->reject('Error!');","position":{"start":{"line":183,"column":1,"offset":5085},"end":{"line":195,"column":4,"offset":5380},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If an exception is not thrown in a ","position":{"start":{"line":197,"column":1,"offset":5382},"end":{"line":197,"column":36,"offset":5417},"indent":[]}},{"type":"inlineCode","value":"$onRejected","position":{"start":{"line":197,"column":36,"offset":5417},"end":{"line":197,"column":49,"offset":5430},"indent":[]}},{"type":"text","value":" callback and the callback\ndoes not return a rejected promise, downstream ","position":{"start":{"line":197,"column":49,"offset":5430},"end":{"line":198,"column":48,"offset":5504},"indent":[1]}},{"type":"inlineCode","value":"$onFulfilled","position":{"start":{"line":198,"column":48,"offset":5504},"end":{"line":198,"column":62,"offset":5518},"indent":[]}},{"type":"text","value":" callbacks are\ninvoked using the value returned from the ","position":{"start":{"line":198,"column":62,"offset":5518},"end":{"line":199,"column":43,"offset":5575},"indent":[1]}},{"type":"inlineCode","value":"$onRejected","position":{"start":{"line":199,"column":43,"offset":5575},"end":{"line":199,"column":56,"offset":5588},"indent":[]}},{"type":"text","value":" callback.","position":{"start":{"line":199,"column":56,"offset":5588},"end":{"line":199,"column":66,"offset":5598},"indent":[]}}],"position":{"start":{"line":197,"column":1,"offset":5382},"end":{"line":199,"column":66,"offset":5598},"indent":[1,1]}},{"type":"code","lang":"php","meta":null,"value":"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$promise\n    ->then(null, function ($reason) {\n        return \"It's ok\";\n    })\n    ->then(function ($value) {\n        assert($value === \"It's ok\");\n    });\n\n$promise->reject('Error!');","position":{"start":{"line":201,"column":1,"offset":5600},"end":{"line":214,"column":4,"offset":5855},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Synchronous Wait","position":{"start":{"line":217,"column":4,"offset":5861},"end":{"line":217,"column":20,"offset":5877},"indent":[]}}],"position":{"start":{"line":217,"column":1,"offset":5858},"end":{"line":217,"column":20,"offset":5877},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can synchronously force promises to complete using a promise's ","position":{"start":{"line":219,"column":1,"offset":5879},"end":{"line":219,"column":68,"offset":5946},"indent":[]}},{"type":"inlineCode","value":"wait","position":{"start":{"line":219,"column":68,"offset":5946},"end":{"line":219,"column":74,"offset":5952},"indent":[]}},{"type":"text","value":"\nmethod. When creating a promise, you can provide a wait function that is used\nto synchronously force a promise to complete. When a wait function is invoked\nit is expected to deliver a value to the promise or reject the promise. If the\nwait function does not deliver a value, then an exception is thrown. The wait\nfunction provided to a promise constructor is invoked when the ","position":{"start":{"line":219,"column":74,"offset":5952},"end":{"line":224,"column":64,"offset":6329},"indent":[1,1,1,1,1]}},{"type":"inlineCode","value":"wait","position":{"start":{"line":224,"column":64,"offset":6329},"end":{"line":224,"column":70,"offset":6335},"indent":[]}},{"type":"text","value":" function\nof the promise is called.","position":{"start":{"line":224,"column":70,"offset":6335},"end":{"line":225,"column":26,"offset":6370},"indent":[1]}}],"position":{"start":{"line":219,"column":1,"offset":5879},"end":{"line":225,"column":26,"offset":6370},"indent":[1,1,1,1,1,1]}},{"type":"code","lang":"php","meta":null,"value":"$promise = new Promise(function () use (&$promise) {\n    $promise->resolve('foo');\n});\n\n// Calling wait will return the value of the promise.\necho $promise->wait(); // outputs \"foo\"","position":{"start":{"line":227,"column":1,"offset":6372},"end":{"line":234,"column":4,"offset":6564},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If an exception is encountered while invoking the wait function of a promise,\nthe promise is rejected with the exception and the exception is thrown.","position":{"start":{"line":236,"column":1,"offset":6566},"end":{"line":237,"column":72,"offset":6715},"indent":[1]}}],"position":{"start":{"line":236,"column":1,"offset":6566},"end":{"line":237,"column":72,"offset":6715},"indent":[1]}},{"type":"code","lang":"php","meta":null,"value":"$promise = new Promise(function () use (&$promise) {\n    throw new Exception('foo');\n});\n\n$promise->wait(); // throws the exception.","position":{"start":{"line":239,"column":1,"offset":6717},"end":{"line":245,"column":4,"offset":6860},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Calling ","position":{"start":{"line":247,"column":1,"offset":6862},"end":{"line":247,"column":9,"offset":6870},"indent":[]}},{"type":"inlineCode","value":"wait","position":{"start":{"line":247,"column":9,"offset":6870},"end":{"line":247,"column":15,"offset":6876},"indent":[]}},{"type":"text","value":" on a promise that has been fulfilled will not trigger the wait\nfunction. It will simply return the previously resolved value.","position":{"start":{"line":247,"column":15,"offset":6876},"end":{"line":248,"column":63,"offset":7002},"indent":[1]}}],"position":{"start":{"line":247,"column":1,"offset":6862},"end":{"line":248,"column":63,"offset":7002},"indent":[1]}},{"type":"code","lang":"php","meta":null,"value":"$promise = new Promise(function () { die('this is not called!'); });\n$promise->resolve('foo');\necho $promise->wait(); // outputs \"foo\"","position":{"start":{"line":250,"column":1,"offset":7004},"end":{"line":254,"column":4,"offset":7149},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Calling ","position":{"start":{"line":256,"column":1,"offset":7151},"end":{"line":256,"column":9,"offset":7159},"indent":[]}},{"type":"inlineCode","value":"wait","position":{"start":{"line":256,"column":9,"offset":7159},"end":{"line":256,"column":15,"offset":7165},"indent":[]}},{"type":"text","value":" on a promise that has been rejected will throw an exception. If\nthe rejection reason is an instance of ","position":{"start":{"line":256,"column":15,"offset":7165},"end":{"line":257,"column":40,"offset":7269},"indent":[1]}},{"type":"inlineCode","value":"\\Exception","position":{"start":{"line":257,"column":40,"offset":7269},"end":{"line":257,"column":52,"offset":7281},"indent":[]}},{"type":"text","value":" the reason is thrown.\nOtherwise, a ","position":{"start":{"line":257,"column":52,"offset":7281},"end":{"line":258,"column":14,"offset":7317},"indent":[1]}},{"type":"inlineCode","value":"GuzzleHttp\\Promise\\RejectionException","position":{"start":{"line":258,"column":14,"offset":7317},"end":{"line":258,"column":53,"offset":7356},"indent":[]}},{"type":"text","value":" is thrown and the reason\ncan be obtained by calling the ","position":{"start":{"line":258,"column":53,"offset":7356},"end":{"line":259,"column":32,"offset":7413},"indent":[1]}},{"type":"inlineCode","value":"getReason","position":{"start":{"line":259,"column":32,"offset":7413},"end":{"line":259,"column":43,"offset":7424},"indent":[]}},{"type":"text","value":" method of the exception.","position":{"start":{"line":259,"column":43,"offset":7424},"end":{"line":259,"column":68,"offset":7449},"indent":[]}}],"position":{"start":{"line":256,"column":1,"offset":7151},"end":{"line":259,"column":68,"offset":7449},"indent":[1,1,1]}},{"type":"code","lang":"php","meta":null,"value":"$promise = new Promise();\n$promise->reject('foo');\n$promise->wait();","position":{"start":{"line":261,"column":1,"offset":7451},"end":{"line":265,"column":4,"offset":7530},"indent":[1,1,1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"PHP Fatal error:  Uncaught exception 'GuzzleHttp\\Promise\\RejectionException' with message 'The promise was rejected with value: foo'","position":{"start":{"line":267,"column":3,"offset":7534},"end":{"line":267,"column":135,"offset":7666},"indent":[]}}],"position":{"start":{"line":267,"column":3,"offset":7534},"end":{"line":267,"column":135,"offset":7666},"indent":[]}}],"position":{"start":{"line":267,"column":1,"offset":7532},"end":{"line":267,"column":135,"offset":7666},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Unwrapping a Promise","position":{"start":{"line":269,"column":5,"offset":7672},"end":{"line":269,"column":25,"offset":7692},"indent":[]}}],"position":{"start":{"line":269,"column":1,"offset":7668},"end":{"line":269,"column":25,"offset":7692},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When synchronously waiting on a promise, you are joining the state of the\npromise into the current state of execution (i.e., return the value of the\npromise if it was fulfilled or throw an exception if it was rejected). This is\ncalled \"unwrapping\" the promise. Waiting on a promise will by default unwrap\nthe promise state.","position":{"start":{"line":271,"column":1,"offset":7694},"end":{"line":275,"column":19,"offset":8017},"indent":[1,1,1,1]}}],"position":{"start":{"line":271,"column":1,"offset":7694},"end":{"line":275,"column":19,"offset":8017},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can force a promise to resolve and ","position":{"start":{"line":277,"column":1,"offset":8019},"end":{"line":277,"column":40,"offset":8058},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":277,"column":41,"offset":8059},"end":{"line":277,"column":44,"offset":8062},"indent":[]}}],"position":{"start":{"line":277,"column":40,"offset":8058},"end":{"line":277,"column":45,"offset":8063},"indent":[]}},{"type":"text","value":" unwrap the state of the promise\nby passing ","position":{"start":{"line":277,"column":45,"offset":8063},"end":{"line":278,"column":12,"offset":8107},"indent":[1]}},{"type":"inlineCode","value":"false","position":{"start":{"line":278,"column":12,"offset":8107},"end":{"line":278,"column":19,"offset":8114},"indent":[]}},{"type":"text","value":" to the first argument of the ","position":{"start":{"line":278,"column":19,"offset":8114},"end":{"line":278,"column":49,"offset":8144},"indent":[]}},{"type":"inlineCode","value":"wait","position":{"start":{"line":278,"column":49,"offset":8144},"end":{"line":278,"column":55,"offset":8150},"indent":[]}},{"type":"text","value":" function:","position":{"start":{"line":278,"column":55,"offset":8150},"end":{"line":278,"column":65,"offset":8160},"indent":[]}}],"position":{"start":{"line":277,"column":1,"offset":8019},"end":{"line":278,"column":65,"offset":8160},"indent":[1]}},{"type":"code","lang":"php","meta":null,"value":"$promise = new Promise();\n$promise->reject('foo');\n// This will not throw an exception. It simply ensures the promise has\n// been resolved.\n$promise->wait(false);","position":{"start":{"line":280,"column":1,"offset":8162},"end":{"line":286,"column":4,"offset":8335},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"When unwrapping a promise, the resolved value of the promise will be waited\nupon until the unwrapped value is not a promise. This means that if you resolve\npromise A with a promise B and unwrap promise A, the value returned by the\nwait function will be the value delivered to promise B.","position":{"start":{"line":288,"column":1,"offset":8337},"end":{"line":291,"column":56,"offset":8623},"indent":[1,1,1]}}],"position":{"start":{"line":288,"column":1,"offset":8337},"end":{"line":291,"column":56,"offset":8623},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Note","position":{"start":{"line":293,"column":3,"offset":8627},"end":{"line":293,"column":7,"offset":8631},"indent":[]}}],"position":{"start":{"line":293,"column":1,"offset":8625},"end":{"line":293,"column":9,"offset":8633},"indent":[]}},{"type":"text","value":": when you do not unwrap the promise, no value is returned.","position":{"start":{"line":293,"column":9,"offset":8633},"end":{"line":293,"column":68,"offset":8692},"indent":[]}}],"position":{"start":{"line":293,"column":1,"offset":8625},"end":{"line":293,"column":68,"offset":8692},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Cancellation","position":{"start":{"line":296,"column":4,"offset":8698},"end":{"line":296,"column":16,"offset":8710},"indent":[]}}],"position":{"start":{"line":296,"column":1,"offset":8695},"end":{"line":296,"column":16,"offset":8710},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can cancel a promise that has not yet been fulfilled using the ","position":{"start":{"line":298,"column":1,"offset":8712},"end":{"line":298,"column":68,"offset":8779},"indent":[]}},{"type":"inlineCode","value":"cancel()","position":{"start":{"line":298,"column":68,"offset":8779},"end":{"line":298,"column":78,"offset":8789},"indent":[]}},{"type":"text","value":"\nmethod of a promise. When creating a promise you can provide an optional\ncancel function that when invoked cancels the action of computing a resolution\nof the promise.","position":{"start":{"line":298,"column":78,"offset":8789},"end":{"line":301,"column":16,"offset":8957},"indent":[1,1,1]}}],"position":{"start":{"line":298,"column":1,"offset":8712},"end":{"line":301,"column":16,"offset":8957},"indent":[1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"API","position":{"start":{"line":304,"column":4,"offset":8963},"end":{"line":304,"column":7,"offset":8966},"indent":[]}}],"position":{"start":{"line":304,"column":1,"offset":8960},"end":{"line":304,"column":7,"offset":8966},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Promise","position":{"start":{"line":306,"column":5,"offset":8972},"end":{"line":306,"column":12,"offset":8979},"indent":[]}}],"position":{"start":{"line":306,"column":1,"offset":8968},"end":{"line":306,"column":12,"offset":8979},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When creating a promise object, you can provide an optional ","position":{"start":{"line":308,"column":1,"offset":8981},"end":{"line":308,"column":61,"offset":9041},"indent":[]}},{"type":"inlineCode","value":"$waitFn","position":{"start":{"line":308,"column":61,"offset":9041},"end":{"line":308,"column":70,"offset":9050},"indent":[]}},{"type":"text","value":" and\n","position":{"start":{"line":308,"column":70,"offset":9050},"end":{"line":309,"column":1,"offset":9055},"indent":[1]}},{"type":"inlineCode","value":"$cancelFn","position":{"start":{"line":309,"column":1,"offset":9055},"end":{"line":309,"column":12,"offset":9066},"indent":[]}},{"type":"text","value":". ","position":{"start":{"line":309,"column":12,"offset":9066},"end":{"line":309,"column":14,"offset":9068},"indent":[]}},{"type":"inlineCode","value":"$waitFn","position":{"start":{"line":309,"column":14,"offset":9068},"end":{"line":309,"column":23,"offset":9077},"indent":[]}},{"type":"text","value":" is a function that is invoked with no arguments and is\nexpected to resolve the promise. ","position":{"start":{"line":309,"column":23,"offset":9077},"end":{"line":310,"column":34,"offset":9166},"indent":[1]}},{"type":"inlineCode","value":"$cancelFn","position":{"start":{"line":310,"column":34,"offset":9166},"end":{"line":310,"column":45,"offset":9177},"indent":[]}},{"type":"text","value":" is a function with no arguments\nthat is expected to cancel the computation of a promise. It is invoked when the\n","position":{"start":{"line":310,"column":45,"offset":9177},"end":{"line":312,"column":1,"offset":9290},"indent":[1,1]}},{"type":"inlineCode","value":"cancel()","position":{"start":{"line":312,"column":1,"offset":9290},"end":{"line":312,"column":11,"offset":9300},"indent":[]}},{"type":"text","value":" method of a promise is called.","position":{"start":{"line":312,"column":11,"offset":9300},"end":{"line":312,"column":42,"offset":9331},"indent":[]}}],"position":{"start":{"line":308,"column":1,"offset":8981},"end":{"line":312,"column":42,"offset":9331},"indent":[1,1,1,1]}},{"type":"code","lang":"php","meta":null,"value":"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise(\n    function () use (&$promise) {\n        $promise->resolve('waited');\n    },\n    function () {\n        // do something that will cancel the promise computation (e.g., close\n        // a socket, cancel a database query, etc...)\n    }\n);\n\nassert('waited' === $promise->wait());","position":{"start":{"line":314,"column":1,"offset":9333},"end":{"line":328,"column":4,"offset":9677},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"A promise has the following methods:","position":{"start":{"line":330,"column":1,"offset":9679},"end":{"line":330,"column":37,"offset":9715},"indent":[]}}],"position":{"start":{"line":330,"column":1,"offset":9679},"end":{"line":330,"column":37,"offset":9715},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"then(callable $onFulfilled, callable $onRejected) : PromiseInterface","position":{"start":{"line":332,"column":3,"offset":9719},"end":{"line":332,"column":73,"offset":9789},"indent":[]}}],"position":{"start":{"line":332,"column":3,"offset":9719},"end":{"line":332,"column":73,"offset":9789},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Appends fulfillment and rejection handlers to the promise, and returns a new promise resolving to the return value of the called handler.","position":{"start":{"line":334,"column":3,"offset":9795},"end":{"line":334,"column":140,"offset":9932},"indent":[]}}],"position":{"start":{"line":334,"column":3,"offset":9795},"end":{"line":334,"column":140,"offset":9932},"indent":[]}}],"position":{"start":{"line":332,"column":1,"offset":9717},"end":{"line":335,"column":1,"offset":9933},"indent":[1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"otherwise(callable $onRejected) : PromiseInterface","position":{"start":{"line":336,"column":3,"offset":9936},"end":{"line":336,"column":55,"offset":9988},"indent":[]}}],"position":{"start":{"line":336,"column":3,"offset":9936},"end":{"line":336,"column":55,"offset":9988},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Appends a rejection handler callback to the promise, and returns a new promise resolving to the return value of the callback if it is called, or to its original fulfillment value if the promise is instead fulfilled.","position":{"start":{"line":338,"column":3,"offset":9994},"end":{"line":338,"column":218,"offset":10209},"indent":[]}}],"position":{"start":{"line":338,"column":3,"offset":9994},"end":{"line":338,"column":218,"offset":10209},"indent":[]}}],"position":{"start":{"line":336,"column":1,"offset":9934},"end":{"line":339,"column":1,"offset":10210},"indent":[1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"wait($unwrap = true) : mixed","position":{"start":{"line":340,"column":3,"offset":10213},"end":{"line":340,"column":33,"offset":10243},"indent":[]}}],"position":{"start":{"line":340,"column":3,"offset":10213},"end":{"line":340,"column":33,"offset":10243},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Synchronously waits on the promise to complete.","position":{"start":{"line":342,"column":3,"offset":10247},"end":{"line":342,"column":50,"offset":10294},"indent":[]}}],"position":{"start":{"line":342,"column":3,"offset":10247},"end":{"line":342,"column":50,"offset":10294},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"$unwrap","position":{"start":{"line":344,"column":3,"offset":10300},"end":{"line":344,"column":12,"offset":10309},"indent":[]}},{"type":"text","value":" controls whether or not the value of the promise is returned for a\nfulfilled promise or if an exception is thrown if the promise is rejected.\nThis is set to ","position":{"start":{"line":344,"column":12,"offset":10309},"end":{"line":346,"column":18,"offset":10471},"indent":[3,3]}},{"type":"inlineCode","value":"true","position":{"start":{"line":346,"column":18,"offset":10471},"end":{"line":346,"column":24,"offset":10477},"indent":[]}},{"type":"text","value":" by default.","position":{"start":{"line":346,"column":24,"offset":10477},"end":{"line":346,"column":36,"offset":10489},"indent":[]}}],"position":{"start":{"line":344,"column":3,"offset":10300},"end":{"line":346,"column":36,"offset":10489},"indent":[3,3]}}],"position":{"start":{"line":340,"column":1,"offset":10211},"end":{"line":347,"column":1,"offset":10490},"indent":[1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cancel()","position":{"start":{"line":348,"column":3,"offset":10493},"end":{"line":348,"column":13,"offset":10503},"indent":[]}}],"position":{"start":{"line":348,"column":3,"offset":10493},"end":{"line":348,"column":13,"offset":10503},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Attempts to cancel the promise if possible. The promise being cancelled and\nthe parent most ancestor that has not yet been resolved will also be\ncancelled. Any promises waiting on the cancelled promise to resolve will also\nbe cancelled.","position":{"start":{"line":350,"column":3,"offset":10507},"end":{"line":353,"column":16,"offset":10749},"indent":[3,3,3]}}],"position":{"start":{"line":350,"column":3,"offset":10507},"end":{"line":353,"column":16,"offset":10749},"indent":[3,3,3]}}],"position":{"start":{"line":348,"column":1,"offset":10491},"end":{"line":354,"column":1,"offset":10750},"indent":[1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"getState() : string","position":{"start":{"line":355,"column":3,"offset":10753},"end":{"line":355,"column":24,"offset":10774},"indent":[]}}],"position":{"start":{"line":355,"column":3,"offset":10753},"end":{"line":355,"column":24,"offset":10774},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Returns the state of the promise. One of ","position":{"start":{"line":357,"column":3,"offset":10778},"end":{"line":357,"column":44,"offset":10819},"indent":[]}},{"type":"inlineCode","value":"pending","position":{"start":{"line":357,"column":44,"offset":10819},"end":{"line":357,"column":53,"offset":10828},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":357,"column":53,"offset":10828},"end":{"line":357,"column":55,"offset":10830},"indent":[]}},{"type":"inlineCode","value":"fulfilled","position":{"start":{"line":357,"column":55,"offset":10830},"end":{"line":357,"column":66,"offset":10841},"indent":[]}},{"type":"text","value":", or\n","position":{"start":{"line":357,"column":66,"offset":10841},"end":{"line":358,"column":3,"offset":10848},"indent":[3]}},{"type":"inlineCode","value":"rejected","position":{"start":{"line":358,"column":3,"offset":10848},"end":{"line":358,"column":13,"offset":10858},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":358,"column":13,"offset":10858},"end":{"line":358,"column":14,"offset":10859},"indent":[]}}],"position":{"start":{"line":357,"column":3,"offset":10778},"end":{"line":358,"column":14,"offset":10859},"indent":[3]}}],"position":{"start":{"line":355,"column":1,"offset":10751},"end":{"line":359,"column":1,"offset":10860},"indent":[1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"resolve($value)","position":{"start":{"line":360,"column":3,"offset":10863},"end":{"line":360,"column":20,"offset":10880},"indent":[]}}],"position":{"start":{"line":360,"column":3,"offset":10863},"end":{"line":360,"column":20,"offset":10880},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Fulfills the promise with the given ","position":{"start":{"line":362,"column":3,"offset":10884},"end":{"line":362,"column":39,"offset":10920},"indent":[]}},{"type":"inlineCode","value":"$value","position":{"start":{"line":362,"column":39,"offset":10920},"end":{"line":362,"column":47,"offset":10928},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":362,"column":47,"offset":10928},"end":{"line":362,"column":48,"offset":10929},"indent":[]}}],"position":{"start":{"line":362,"column":3,"offset":10884},"end":{"line":362,"column":48,"offset":10929},"indent":[]}}],"position":{"start":{"line":360,"column":1,"offset":10861},"end":{"line":363,"column":1,"offset":10930},"indent":[1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"reject($reason)","position":{"start":{"line":364,"column":3,"offset":10933},"end":{"line":364,"column":20,"offset":10950},"indent":[]}}],"position":{"start":{"line":364,"column":3,"offset":10933},"end":{"line":364,"column":20,"offset":10950},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Rejects the promise with the given ","position":{"start":{"line":366,"column":3,"offset":10954},"end":{"line":366,"column":38,"offset":10989},"indent":[]}},{"type":"inlineCode","value":"$reason","position":{"start":{"line":366,"column":38,"offset":10989},"end":{"line":366,"column":47,"offset":10998},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":366,"column":47,"offset":10998},"end":{"line":366,"column":48,"offset":10999},"indent":[]}}],"position":{"start":{"line":366,"column":3,"offset":10954},"end":{"line":366,"column":48,"offset":10999},"indent":[]}}],"position":{"start":{"line":364,"column":1,"offset":10931},"end":{"line":366,"column":48,"offset":10999},"indent":[1,1]}}],"position":{"start":{"line":332,"column":1,"offset":9717},"end":{"line":366,"column":48,"offset":10999},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"FulfilledPromise","position":{"start":{"line":369,"column":5,"offset":11006},"end":{"line":369,"column":21,"offset":11022},"indent":[]}}],"position":{"start":{"line":369,"column":1,"offset":11002},"end":{"line":369,"column":21,"offset":11022},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A fulfilled promise can be created to represent a promise that has been\nfulfilled.","position":{"start":{"line":371,"column":1,"offset":11024},"end":{"line":372,"column":11,"offset":11106},"indent":[1]}}],"position":{"start":{"line":371,"column":1,"offset":11024},"end":{"line":372,"column":11,"offset":11106},"indent":[1]}},{"type":"code","lang":"php","meta":null,"value":"use GuzzleHttp\\Promise\\FulfilledPromise;\n\n$promise = new FulfilledPromise('value');\n\n// Fulfilled callbacks are immediately invoked.\n$promise->then(function ($value) {\n    echo $value;\n});","position":{"start":{"line":374,"column":1,"offset":11108},"end":{"line":383,"column":4,"offset":11307},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"RejectedPromise","position":{"start":{"line":386,"column":5,"offset":11314},"end":{"line":386,"column":20,"offset":11329},"indent":[]}}],"position":{"start":{"line":386,"column":1,"offset":11310},"end":{"line":386,"column":20,"offset":11329},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A rejected promise can be created to represent a promise that has been\nrejected.","position":{"start":{"line":388,"column":1,"offset":11331},"end":{"line":389,"column":10,"offset":11411},"indent":[1]}}],"position":{"start":{"line":388,"column":1,"offset":11331},"end":{"line":389,"column":10,"offset":11411},"indent":[1]}},{"type":"code","lang":"php","meta":null,"value":"use GuzzleHttp\\Promise\\RejectedPromise;\n\n$promise = new RejectedPromise('Error');\n\n// Rejected callbacks are immediately invoked.\n$promise->then(null, function ($reason) {\n    echo $reason;\n});","position":{"start":{"line":391,"column":1,"offset":11413},"end":{"line":400,"column":4,"offset":11617},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Promise Interoperability","position":{"start":{"line":403,"column":4,"offset":11623},"end":{"line":403,"column":28,"offset":11647},"indent":[]}}],"position":{"start":{"line":403,"column":1,"offset":11620},"end":{"line":403,"column":28,"offset":11647},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This library works with foreign promises that have a ","position":{"start":{"line":405,"column":1,"offset":11649},"end":{"line":405,"column":54,"offset":11702},"indent":[]}},{"type":"inlineCode","value":"then","position":{"start":{"line":405,"column":54,"offset":11702},"end":{"line":405,"column":60,"offset":11708},"indent":[]}},{"type":"text","value":" method. This means\nyou can use Guzzle promises with ","position":{"start":{"line":405,"column":60,"offset":11708},"end":{"line":406,"column":34,"offset":11761},"indent":[1]}},{"type":"link","title":null,"url":"https://github.com/reactphp/promise","children":[{"type":"text","value":"React promises","position":{"start":{"line":406,"column":35,"offset":11762},"end":{"line":406,"column":49,"offset":11776},"indent":[]}}],"position":{"start":{"line":406,"column":34,"offset":11761},"end":{"line":406,"column":87,"offset":11814},"indent":[]}},{"type":"text","value":"\nfor example. When a foreign promise is returned inside of a then method\ncallback, promise resolution will occur recursively.","position":{"start":{"line":406,"column":87,"offset":11814},"end":{"line":408,"column":53,"offset":11939},"indent":[1,1]}}],"position":{"start":{"line":405,"column":1,"offset":11649},"end":{"line":408,"column":53,"offset":11939},"indent":[1,1,1]}},{"type":"code","lang":"php","meta":null,"value":"// Create a React promise\n$deferred = new React\\Promise\\Deferred();\n$reactPromise = $deferred->promise();\n\n// Create a Guzzle promise that is fulfilled with a React promise.\n$guzzlePromise = new GuzzleHttp\\Promise\\Promise();\n$guzzlePromise->then(function ($value) use ($reactPromise) {\n    // Do something something with the value...\n    // Return the React promise\n    return $reactPromise;\n});","position":{"start":{"line":410,"column":1,"offset":11941},"end":{"line":422,"column":4,"offset":12347},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Please note that wait and cancel chaining is no longer possible when forwarding\na foreign promise. You will need to wrap a third-party promise with a Guzzle\npromise in order to utilize wait and cancel functions with foreign promises.","position":{"start":{"line":424,"column":1,"offset":12349},"end":{"line":426,"column":77,"offset":12582},"indent":[1,1]}}],"position":{"start":{"line":424,"column":1,"offset":12349},"end":{"line":426,"column":77,"offset":12582},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Event Loop Integration","position":{"start":{"line":429,"column":5,"offset":12589},"end":{"line":429,"column":27,"offset":12611},"indent":[]}}],"position":{"start":{"line":429,"column":1,"offset":12585},"end":{"line":429,"column":27,"offset":12611},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In order to keep the stack size constant, Guzzle promises are resolved\nasynchronously using a task queue. When waiting on promises synchronously, the\ntask queue will be automatically run to ensure that the blocking promise and\nany forwarded promises are resolved. When using promises asynchronously in an\nevent loop, you will need to run the task queue on each tick of the loop. If\nyou do not run the task queue, then promises will not be resolved.","position":{"start":{"line":431,"column":1,"offset":12613},"end":{"line":436,"column":67,"offset":13061},"indent":[1,1,1,1,1]}}],"position":{"start":{"line":431,"column":1,"offset":12613},"end":{"line":436,"column":67,"offset":13061},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can run the task queue using the ","position":{"start":{"line":438,"column":1,"offset":13063},"end":{"line":438,"column":38,"offset":13100},"indent":[]}},{"type":"inlineCode","value":"run()","position":{"start":{"line":438,"column":38,"offset":13100},"end":{"line":438,"column":45,"offset":13107},"indent":[]}},{"type":"text","value":" method of the global task queue\ninstance.","position":{"start":{"line":438,"column":45,"offset":13107},"end":{"line":439,"column":10,"offset":13149},"indent":[1]}}],"position":{"start":{"line":438,"column":1,"offset":13063},"end":{"line":439,"column":10,"offset":13149},"indent":[1]}},{"type":"code","lang":"php","meta":null,"value":"// Get the global task queue\n$queue = GuzzleHttp\\Promise\\Utils::queue();\n$queue->run();","position":{"start":{"line":441,"column":1,"offset":13151},"end":{"line":445,"column":4,"offset":13249},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"For example, you could use Guzzle promises with React using a periodic timer:","position":{"start":{"line":447,"column":1,"offset":13251},"end":{"line":447,"column":78,"offset":13328},"indent":[]}}],"position":{"start":{"line":447,"column":1,"offset":13251},"end":{"line":447,"column":78,"offset":13328},"indent":[]}},{"type":"code","lang":"php","meta":null,"value":"$loop = React\\EventLoop\\Factory::create();\n$loop->addPeriodicTimer(0, [$queue, 'run']);","position":{"start":{"line":449,"column":1,"offset":13330},"end":{"line":452,"column":4,"offset":13428},"indent":[1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Implementation Notes","position":{"start":{"line":455,"column":4,"offset":13434},"end":{"line":455,"column":24,"offset":13454},"indent":[]}}],"position":{"start":{"line":455,"column":1,"offset":13431},"end":{"line":455,"column":24,"offset":13454},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Promise Resolution and Chaining is Handled Iteratively","position":{"start":{"line":457,"column":5,"offset":13460},"end":{"line":457,"column":59,"offset":13514},"indent":[]}}],"position":{"start":{"line":457,"column":1,"offset":13456},"end":{"line":457,"column":59,"offset":13514},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"By shuffling pending handlers from one owner to another, promises are\nresolved iteratively, allowing for \"infinite\" then chaining.","position":{"start":{"line":459,"column":1,"offset":13516},"end":{"line":460,"column":61,"offset":13646},"indent":[1]}}],"position":{"start":{"line":459,"column":1,"offset":13516},"end":{"line":460,"column":61,"offset":13646},"indent":[1]}},{"type":"code","lang":"php","meta":null,"value":"<?php\nrequire 'vendor/autoload.php';\n\nuse GuzzleHttp\\Promise\\Promise;\n\n$parent = new Promise();\n$p = $parent;\n\nfor ($i = 0; $i < 1000; $i++) {\n    $p = $p->then(function ($v) {\n        // The stack size remains constant (a good thing)\n        echo xdebug_get_stack_depth() . ', ';\n        return $v + 1;\n    });\n}\n\n$parent->resolve(0);\nvar_dump($p->wait()); // int(1000)\n","position":{"start":{"line":462,"column":1,"offset":13648},"end":{"line":482,"column":4,"offset":14030},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"When a promise is fulfilled or rejected with a non-promise value, the promise\nthen takes ownership of the handlers of each child promise and delivers values\ndown the chain without using recursion.","position":{"start":{"line":484,"column":1,"offset":14032},"end":{"line":486,"column":40,"offset":14228},"indent":[1,1]}}],"position":{"start":{"line":484,"column":1,"offset":14032},"end":{"line":486,"column":40,"offset":14228},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"When a promise is resolved with another promise, the original promise transfers\nall of its pending handlers to the new promise. When the new promise is\neventually resolved, all of the pending handlers are delivered the forwarded\nvalue.","position":{"start":{"line":488,"column":1,"offset":14230},"end":{"line":491,"column":7,"offset":14465},"indent":[1,1,1]}}],"position":{"start":{"line":488,"column":1,"offset":14230},"end":{"line":491,"column":7,"offset":14465},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"A Promise is the Deferred","position":{"start":{"line":493,"column":5,"offset":14471},"end":{"line":493,"column":30,"offset":14496},"indent":[]}}],"position":{"start":{"line":493,"column":1,"offset":14467},"end":{"line":493,"column":30,"offset":14496},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Some promise libraries implement promises using a deferred object to represent\na computation and a promise object to represent the delivery of the result of\nthe computation. This is a nice separation of computation and delivery because\nconsumers of the promise cannot modify the value that will be eventually\ndelivered.","position":{"start":{"line":495,"column":1,"offset":14498},"end":{"line":499,"column":11,"offset":14817},"indent":[1,1,1,1]}}],"position":{"start":{"line":495,"column":1,"offset":14498},"end":{"line":499,"column":11,"offset":14817},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"One side effect of being able to implement promise resolution and chaining\niteratively is that you need to be able for one promise to reach into the state\nof another promise to shuffle around ownership of handlers. In order to achieve\nthis without making the handlers of a promise publicly mutable, a promise is\nalso the deferred value, allowing promises of the same parent class to reach\ninto and modify the private properties of promises of the same type. While this\ndoes allow consumers of the value to modify the resolution or rejection of the\ndeferred, it is a small price to pay for keeping the stack size constant.","position":{"start":{"line":501,"column":1,"offset":14819},"end":{"line":508,"column":74,"offset":15440},"indent":[1,1,1,1,1,1,1]}}],"position":{"start":{"line":501,"column":1,"offset":14819},"end":{"line":508,"column":74,"offset":15440},"indent":[1,1,1,1,1,1,1]}},{"type":"code","lang":"php","meta":null,"value":"$promise = new Promise();\n$promise->then(function ($value) { echo $value; });\n// The promise is the deferred value, so you can deliver a value to it.\n$promise->resolve('foo');\n// prints \"foo\"","position":{"start":{"line":510,"column":1,"offset":15442},"end":{"line":516,"column":4,"offset":15644},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Upgrading from Function API","position":{"start":{"line":519,"column":4,"offset":15650},"end":{"line":519,"column":31,"offset":15677},"indent":[]}}],"position":{"start":{"line":519,"column":1,"offset":15647},"end":{"line":519,"column":31,"offset":15677},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A static API was first introduced in 1.4.0, in order to mitigate problems with\nfunctions conflicting between global and local copies of the package. The\nfunction API was removed in 2.0.0. A migration table has been provided here for\nyour convenience:","position":{"start":{"line":521,"column":1,"offset":15679},"end":{"line":524,"column":18,"offset":15929},"indent":[1,1,1]}}],"position":{"start":{"line":521,"column":1,"offset":15679},"end":{"line":524,"column":18,"offset":15929},"indent":[1,1,1]}},{"type":"table","align":[null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Original Function","position":{"start":{"line":526,"column":3,"offset":15933},"end":{"line":526,"column":20,"offset":15950},"indent":[]}}],"position":{"start":{"line":526,"column":3,"offset":15933},"end":{"line":526,"column":20,"offset":15950},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Replacement Method","position":{"start":{"line":526,"column":23,"offset":15953},"end":{"line":526,"column":41,"offset":15971},"indent":[]}}],"position":{"start":{"line":526,"column":23,"offset":15953},"end":{"line":526,"column":41,"offset":15971},"indent":[]}}],"position":{"start":{"line":526,"column":1,"offset":15931},"end":{"line":526,"column":43,"offset":15973},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"queue","position":{"start":{"line":528,"column":3,"offset":16012},"end":{"line":528,"column":10,"offset":16019},"indent":[]}}],"position":{"start":{"line":528,"column":3,"offset":16012},"end":{"line":528,"column":10,"offset":16019},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Utils::queue","position":{"start":{"line":528,"column":13,"offset":16022},"end":{"line":528,"column":27,"offset":16036},"indent":[]}}],"position":{"start":{"line":528,"column":13,"offset":16022},"end":{"line":528,"column":27,"offset":16036},"indent":[]}}],"position":{"start":{"line":528,"column":1,"offset":16010},"end":{"line":528,"column":29,"offset":16038},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"task","position":{"start":{"line":529,"column":3,"offset":16041},"end":{"line":529,"column":9,"offset":16047},"indent":[]}}],"position":{"start":{"line":529,"column":3,"offset":16041},"end":{"line":529,"column":9,"offset":16047},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Utils::task","position":{"start":{"line":529,"column":12,"offset":16050},"end":{"line":529,"column":25,"offset":16063},"indent":[]}}],"position":{"start":{"line":529,"column":12,"offset":16050},"end":{"line":529,"column":25,"offset":16063},"indent":[]}}],"position":{"start":{"line":529,"column":1,"offset":16039},"end":{"line":529,"column":27,"offset":16065},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"promise_for","position":{"start":{"line":530,"column":3,"offset":16068},"end":{"line":530,"column":16,"offset":16081},"indent":[]}}],"position":{"start":{"line":530,"column":3,"offset":16068},"end":{"line":530,"column":16,"offset":16081},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Create::promiseFor","position":{"start":{"line":530,"column":19,"offset":16084},"end":{"line":530,"column":39,"offset":16104},"indent":[]}}],"position":{"start":{"line":530,"column":19,"offset":16084},"end":{"line":530,"column":39,"offset":16104},"indent":[]}}],"position":{"start":{"line":530,"column":1,"offset":16066},"end":{"line":530,"column":41,"offset":16106},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"rejection_for","position":{"start":{"line":531,"column":3,"offset":16109},"end":{"line":531,"column":18,"offset":16124},"indent":[]}}],"position":{"start":{"line":531,"column":3,"offset":16109},"end":{"line":531,"column":18,"offset":16124},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Create::rejectionFor","position":{"start":{"line":531,"column":21,"offset":16127},"end":{"line":531,"column":43,"offset":16149},"indent":[]}}],"position":{"start":{"line":531,"column":21,"offset":16127},"end":{"line":531,"column":43,"offset":16149},"indent":[]}}],"position":{"start":{"line":531,"column":1,"offset":16107},"end":{"line":531,"column":45,"offset":16151},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"exception_for","position":{"start":{"line":532,"column":3,"offset":16154},"end":{"line":532,"column":18,"offset":16169},"indent":[]}}],"position":{"start":{"line":532,"column":3,"offset":16154},"end":{"line":532,"column":18,"offset":16169},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Create::exceptionFor","position":{"start":{"line":532,"column":21,"offset":16172},"end":{"line":532,"column":43,"offset":16194},"indent":[]}}],"position":{"start":{"line":532,"column":21,"offset":16172},"end":{"line":532,"column":43,"offset":16194},"indent":[]}}],"position":{"start":{"line":532,"column":1,"offset":16152},"end":{"line":532,"column":45,"offset":16196},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"iter_for","position":{"start":{"line":533,"column":3,"offset":16199},"end":{"line":533,"column":13,"offset":16209},"indent":[]}}],"position":{"start":{"line":533,"column":3,"offset":16199},"end":{"line":533,"column":13,"offset":16209},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Create::iterFor","position":{"start":{"line":533,"column":16,"offset":16212},"end":{"line":533,"column":33,"offset":16229},"indent":[]}}],"position":{"start":{"line":533,"column":16,"offset":16212},"end":{"line":533,"column":33,"offset":16229},"indent":[]}}],"position":{"start":{"line":533,"column":1,"offset":16197},"end":{"line":533,"column":35,"offset":16231},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"inspect","position":{"start":{"line":534,"column":3,"offset":16234},"end":{"line":534,"column":12,"offset":16243},"indent":[]}}],"position":{"start":{"line":534,"column":3,"offset":16234},"end":{"line":534,"column":12,"offset":16243},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Utils::inspect","position":{"start":{"line":534,"column":15,"offset":16246},"end":{"line":534,"column":31,"offset":16262},"indent":[]}}],"position":{"start":{"line":534,"column":15,"offset":16246},"end":{"line":534,"column":31,"offset":16262},"indent":[]}}],"position":{"start":{"line":534,"column":1,"offset":16232},"end":{"line":534,"column":33,"offset":16264},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"inspect_all","position":{"start":{"line":535,"column":3,"offset":16267},"end":{"line":535,"column":16,"offset":16280},"indent":[]}}],"position":{"start":{"line":535,"column":3,"offset":16267},"end":{"line":535,"column":16,"offset":16280},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Utils::inspectAll","position":{"start":{"line":535,"column":19,"offset":16283},"end":{"line":535,"column":38,"offset":16302},"indent":[]}}],"position":{"start":{"line":535,"column":19,"offset":16283},"end":{"line":535,"column":38,"offset":16302},"indent":[]}}],"position":{"start":{"line":535,"column":1,"offset":16265},"end":{"line":535,"column":40,"offset":16304},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"unwrap","position":{"start":{"line":536,"column":3,"offset":16307},"end":{"line":536,"column":11,"offset":16315},"indent":[]}}],"position":{"start":{"line":536,"column":3,"offset":16307},"end":{"line":536,"column":11,"offset":16315},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Utils::unwrap","position":{"start":{"line":536,"column":14,"offset":16318},"end":{"line":536,"column":29,"offset":16333},"indent":[]}}],"position":{"start":{"line":536,"column":14,"offset":16318},"end":{"line":536,"column":29,"offset":16333},"indent":[]}}],"position":{"start":{"line":536,"column":1,"offset":16305},"end":{"line":536,"column":31,"offset":16335},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"all","position":{"start":{"line":537,"column":3,"offset":16338},"end":{"line":537,"column":8,"offset":16343},"indent":[]}}],"position":{"start":{"line":537,"column":3,"offset":16338},"end":{"line":537,"column":8,"offset":16343},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Utils::all","position":{"start":{"line":537,"column":11,"offset":16346},"end":{"line":537,"column":23,"offset":16358},"indent":[]}}],"position":{"start":{"line":537,"column":11,"offset":16346},"end":{"line":537,"column":23,"offset":16358},"indent":[]}}],"position":{"start":{"line":537,"column":1,"offset":16336},"end":{"line":537,"column":25,"offset":16360},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"some","position":{"start":{"line":538,"column":3,"offset":16363},"end":{"line":538,"column":9,"offset":16369},"indent":[]}}],"position":{"start":{"line":538,"column":3,"offset":16363},"end":{"line":538,"column":9,"offset":16369},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Utils::some","position":{"start":{"line":538,"column":12,"offset":16372},"end":{"line":538,"column":25,"offset":16385},"indent":[]}}],"position":{"start":{"line":538,"column":12,"offset":16372},"end":{"line":538,"column":25,"offset":16385},"indent":[]}}],"position":{"start":{"line":538,"column":1,"offset":16361},"end":{"line":538,"column":27,"offset":16387},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"any","position":{"start":{"line":539,"column":3,"offset":16390},"end":{"line":539,"column":8,"offset":16395},"indent":[]}}],"position":{"start":{"line":539,"column":3,"offset":16390},"end":{"line":539,"column":8,"offset":16395},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Utils::any","position":{"start":{"line":539,"column":11,"offset":16398},"end":{"line":539,"column":23,"offset":16410},"indent":[]}}],"position":{"start":{"line":539,"column":11,"offset":16398},"end":{"line":539,"column":23,"offset":16410},"indent":[]}}],"position":{"start":{"line":539,"column":1,"offset":16388},"end":{"line":539,"column":25,"offset":16412},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"settle","position":{"start":{"line":540,"column":3,"offset":16415},"end":{"line":540,"column":11,"offset":16423},"indent":[]}}],"position":{"start":{"line":540,"column":3,"offset":16415},"end":{"line":540,"column":11,"offset":16423},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Utils::settle","position":{"start":{"line":540,"column":14,"offset":16426},"end":{"line":540,"column":29,"offset":16441},"indent":[]}}],"position":{"start":{"line":540,"column":14,"offset":16426},"end":{"line":540,"column":29,"offset":16441},"indent":[]}}],"position":{"start":{"line":540,"column":1,"offset":16413},"end":{"line":540,"column":31,"offset":16443},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"each","position":{"start":{"line":541,"column":3,"offset":16446},"end":{"line":541,"column":9,"offset":16452},"indent":[]}}],"position":{"start":{"line":541,"column":3,"offset":16446},"end":{"line":541,"column":9,"offset":16452},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Each::of","position":{"start":{"line":541,"column":12,"offset":16455},"end":{"line":541,"column":22,"offset":16465},"indent":[]}}],"position":{"start":{"line":541,"column":12,"offset":16455},"end":{"line":541,"column":22,"offset":16465},"indent":[]}}],"position":{"start":{"line":541,"column":1,"offset":16444},"end":{"line":541,"column":24,"offset":16467},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"each_limit","position":{"start":{"line":542,"column":3,"offset":16470},"end":{"line":542,"column":15,"offset":16482},"indent":[]}}],"position":{"start":{"line":542,"column":3,"offset":16470},"end":{"line":542,"column":15,"offset":16482},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Each::ofLimit","position":{"start":{"line":542,"column":18,"offset":16485},"end":{"line":542,"column":33,"offset":16500},"indent":[]}}],"position":{"start":{"line":542,"column":18,"offset":16485},"end":{"line":542,"column":33,"offset":16500},"indent":[]}}],"position":{"start":{"line":542,"column":1,"offset":16468},"end":{"line":542,"column":35,"offset":16502},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"each_limit_all","position":{"start":{"line":543,"column":3,"offset":16505},"end":{"line":543,"column":19,"offset":16521},"indent":[]}}],"position":{"start":{"line":543,"column":3,"offset":16505},"end":{"line":543,"column":19,"offset":16521},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Each::ofLimitAll","position":{"start":{"line":543,"column":22,"offset":16524},"end":{"line":543,"column":40,"offset":16542},"indent":[]}}],"position":{"start":{"line":543,"column":22,"offset":16524},"end":{"line":543,"column":40,"offset":16542},"indent":[]}}],"position":{"start":{"line":543,"column":1,"offset":16503},"end":{"line":543,"column":42,"offset":16544},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"!is_fulfilled","position":{"start":{"line":544,"column":3,"offset":16547},"end":{"line":544,"column":18,"offset":16562},"indent":[]}}],"position":{"start":{"line":544,"column":3,"offset":16547},"end":{"line":544,"column":18,"offset":16562},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Is::pending","position":{"start":{"line":544,"column":21,"offset":16565},"end":{"line":544,"column":34,"offset":16578},"indent":[]}}],"position":{"start":{"line":544,"column":21,"offset":16565},"end":{"line":544,"column":34,"offset":16578},"indent":[]}}],"position":{"start":{"line":544,"column":1,"offset":16545},"end":{"line":544,"column":36,"offset":16580},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"is_fulfilled","position":{"start":{"line":545,"column":3,"offset":16583},"end":{"line":545,"column":17,"offset":16597},"indent":[]}}],"position":{"start":{"line":545,"column":3,"offset":16583},"end":{"line":545,"column":17,"offset":16597},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Is::fulfilled","position":{"start":{"line":545,"column":20,"offset":16600},"end":{"line":545,"column":35,"offset":16615},"indent":[]}}],"position":{"start":{"line":545,"column":20,"offset":16600},"end":{"line":545,"column":35,"offset":16615},"indent":[]}}],"position":{"start":{"line":545,"column":1,"offset":16581},"end":{"line":545,"column":37,"offset":16617},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"is_rejected","position":{"start":{"line":546,"column":3,"offset":16620},"end":{"line":546,"column":16,"offset":16633},"indent":[]}}],"position":{"start":{"line":546,"column":3,"offset":16620},"end":{"line":546,"column":16,"offset":16633},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Is::rejected","position":{"start":{"line":546,"column":19,"offset":16636},"end":{"line":546,"column":33,"offset":16650},"indent":[]}}],"position":{"start":{"line":546,"column":19,"offset":16636},"end":{"line":546,"column":33,"offset":16650},"indent":[]}}],"position":{"start":{"line":546,"column":1,"offset":16618},"end":{"line":546,"column":35,"offset":16652},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"is_settled","position":{"start":{"line":547,"column":3,"offset":16655},"end":{"line":547,"column":15,"offset":16667},"indent":[]}}],"position":{"start":{"line":547,"column":3,"offset":16655},"end":{"line":547,"column":15,"offset":16667},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Is::settled","position":{"start":{"line":547,"column":18,"offset":16670},"end":{"line":547,"column":31,"offset":16683},"indent":[]}}],"position":{"start":{"line":547,"column":18,"offset":16670},"end":{"line":547,"column":31,"offset":16683},"indent":[]}}],"position":{"start":{"line":547,"column":1,"offset":16653},"end":{"line":547,"column":33,"offset":16685},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"inlineCode","value":"coroutine","position":{"start":{"line":548,"column":3,"offset":16688},"end":{"line":548,"column":14,"offset":16699},"indent":[]}}],"position":{"start":{"line":548,"column":3,"offset":16688},"end":{"line":548,"column":14,"offset":16699},"indent":[]}},{"type":"tableCell","children":[{"type":"inlineCode","value":"Coroutine::of","position":{"start":{"line":548,"column":17,"offset":16702},"end":{"line":548,"column":32,"offset":16717},"indent":[]}}],"position":{"start":{"line":548,"column":17,"offset":16702},"end":{"line":548,"column":32,"offset":16717},"indent":[]}}],"position":{"start":{"line":548,"column":1,"offset":16686},"end":{"line":548,"column":34,"offset":16719},"indent":[]}}],"position":{"start":{"line":526,"column":1,"offset":15931},"end":{"line":548,"column":34,"offset":16719},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Security","position":{"start":{"line":551,"column":4,"offset":16725},"end":{"line":551,"column":12,"offset":16733},"indent":[]}}],"position":{"start":{"line":551,"column":1,"offset":16722},"end":{"line":551,"column":12,"offset":16733},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you discover a security vulnerability within this package, please send an email to ","position":{"start":{"line":553,"column":1,"offset":16735},"end":{"line":553,"column":87,"offset":16821},"indent":[]}},{"type":"link","title":null,"url":"mailto:security@tidelift.com.","children":[{"type":"text","value":"security@tidelift.com.","position":{"start":{"line":553,"column":87,"offset":16821},"end":{"line":553,"column":109,"offset":16843},"indent":[]}}],"position":{"start":{"line":553,"column":87,"offset":16821},"end":{"line":553,"column":109,"offset":16843},"indent":[]}},{"type":"text","value":" All security vulnerabilities will be promptly addressed. Please do not disclose security-related issues publicly until a fix has been announced. Please see ","position":{"start":{"line":553,"column":109,"offset":16843},"end":{"line":553,"column":266,"offset":17000},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/guzzle/promises/security/policy","children":[{"type":"text","value":"Security Policy","position":{"start":{"line":553,"column":267,"offset":17001},"end":{"line":553,"column":282,"offset":17016},"indent":[]}}],"position":{"start":{"line":553,"column":266,"offset":17000},"end":{"line":553,"column":335,"offset":17069},"indent":[]}},{"type":"text","value":" for more information.","position":{"start":{"line":553,"column":335,"offset":17069},"end":{"line":553,"column":357,"offset":17091},"indent":[]}}],"position":{"start":{"line":553,"column":1,"offset":16735},"end":{"line":553,"column":357,"offset":17091},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"License","position":{"start":{"line":556,"column":4,"offset":17097},"end":{"line":556,"column":11,"offset":17104},"indent":[]}}],"position":{"start":{"line":556,"column":1,"offset":17094},"end":{"line":556,"column":11,"offset":17104},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Guzzle is made available under the MIT License (MIT). Please see ","position":{"start":{"line":558,"column":1,"offset":17106},"end":{"line":558,"column":66,"offset":17171},"indent":[]}},{"type":"link","title":null,"url":"LICENSE","children":[{"type":"text","value":"License File","position":{"start":{"line":558,"column":67,"offset":17172},"end":{"line":558,"column":79,"offset":17184},"indent":[]}}],"position":{"start":{"line":558,"column":66,"offset":17171},"end":{"line":558,"column":89,"offset":17194},"indent":[]}},{"type":"text","value":" for more information.","position":{"start":{"line":558,"column":89,"offset":17194},"end":{"line":558,"column":111,"offset":17216},"indent":[]}}],"position":{"start":{"line":558,"column":1,"offset":17106},"end":{"line":558,"column":111,"offset":17216},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"For Enterprise","position":{"start":{"line":561,"column":4,"offset":17222},"end":{"line":561,"column":18,"offset":17236},"indent":[]}}],"position":{"start":{"line":561,"column":1,"offset":17219},"end":{"line":561,"column":18,"offset":17236},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Available as part of the Tidelift Subscription","position":{"start":{"line":563,"column":1,"offset":17238},"end":{"line":563,"column":47,"offset":17284},"indent":[]}}],"position":{"start":{"line":563,"column":1,"offset":17238},"end":{"line":563,"column":47,"offset":17284},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The maintainers of Guzzle and thousands of other packages are working with Tidelift to deliver commercial support and maintenance for the open source dependencies you use to build your applications. Save time, reduce risk, and improve code health, while paying the maintainers of the exact dependencies you use. ","position":{"start":{"line":565,"column":1,"offset":17286},"end":{"line":565,"column":313,"offset":17598},"indent":[]}},{"type":"link","title":null,"url":"https://tidelift.com/subscription/pkg/packagist-guzzlehttp-promises?utm_source=packagist-guzzlehttp-promises&utm_medium=referral&utm_campaign=enterprise&utm_term=repo","children":[{"type":"text","value":"Learn more.","position":{"start":{"line":565,"column":314,"offset":17599},"end":{"line":565,"column":325,"offset":17610},"indent":[]}}],"position":{"start":{"line":565,"column":313,"offset":17598},"end":{"line":565,"column":494,"offset":17779},"indent":[]}}],"position":{"start":{"line":565,"column":1,"offset":17286},"end":{"line":565,"column":494,"offset":17779},"indent":[]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":568,"column":1,"offset":17782},"end":{"line":568,"column":31,"offset":17812},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":568,"column":31,"offset":17812}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"C:/wamp64/www/laravel_training/node_modules/gatsby-theme-docz/src/base/Layout.js\"\nexport const _frontmatter = {};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"guzzle-promises\"\n    }}>{`Guzzle Promises`}</h1>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://promisesaplus.com/\"\n      }}>{`Promises/A+`}</a>{` implementation that handles promise\nchaining and resolution iteratively, allowing for \"infinite\" promise chaining\nwhile keeping the stack size constant. Read `}<a parentName=\"p\" {...{\n        \"href\": \"https://blog.domenic.me/youre-missing-the-point-of-promises/\"\n      }}>{`this blog post`}</a>{`\nfor a general introduction to promises.`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#features\"\n        }}>{`Features`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#quick-start\"\n        }}>{`Quick start`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#synchronous-wait\"\n        }}>{`Synchronous wait`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#cancellation\"\n        }}>{`Cancellation`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#api\"\n        }}>{`API`}</a>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#promise\"\n            }}>{`Promise`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#fulfilledpromise\"\n            }}>{`FulfilledPromise`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#rejectedpromise\"\n            }}>{`RejectedPromise`}</a></li>\n        </ul>\n      </li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#promise-interop\"\n        }}>{`Promise interop`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#implementation-notes\"\n        }}>{`Implementation notes`}</a></li>\n    </ul>\n    <h2 {...{\n      \"id\": \"features\"\n    }}>{`Features`}</h2>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://promisesaplus.com/\"\n        }}>{`Promises/A+`}</a>{` implementation.`}</li>\n      <li parentName=\"ul\">{`Promise resolution and chaining is handled iteratively, allowing for\n\"infinite\" promise chaining.`}</li>\n      <li parentName=\"ul\">{`Promises have a synchronous `}<inlineCode parentName=\"li\">{`wait`}</inlineCode>{` method.`}</li>\n      <li parentName=\"ul\">{`Promises can be cancelled.`}</li>\n      <li parentName=\"ul\">{`Works with any object that has a `}<inlineCode parentName=\"li\">{`then`}</inlineCode>{` function.`}</li>\n      <li parentName=\"ul\">{`C# style async/await coroutine promises using\n`}<inlineCode parentName=\"li\">{`GuzzleHttp\\\\Promise\\\\Coroutine::of()`}</inlineCode>{`.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"installation\"\n    }}>{`Installation`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`composer require guzzlehttp/promises\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"version-guidance\"\n    }}>{`Version Guidance`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Version`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Status`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`PHP Version`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`1.x`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Security fixes only`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`>=5.5,<8.3`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`2.x`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Latest`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`>=7.2.5,<8.5`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"quick-start\"\n    }}>{`Quick Start`}</h2>\n    <p>{`A `}<em parentName=\"p\">{`promise`}</em>{` represents the eventual result of an asynchronous operation. The\nprimary way of interacting with a promise is through its `}<inlineCode parentName=\"p\">{`then`}</inlineCode>{` method, which\nregisters callbacks to receive either a promise's eventual value or the reason\nwhy the promise cannot be fulfilled.`}</p>\n    <h3 {...{\n      \"id\": \"callbacks\"\n    }}>{`Callbacks`}</h3>\n    <p>{`Callbacks are registered with the `}<inlineCode parentName=\"p\">{`then`}</inlineCode>{` method by providing an optional\n`}<inlineCode parentName=\"p\">{`$onFulfilled`}</inlineCode>{` followed by an optional `}<inlineCode parentName=\"p\">{`$onRejected`}</inlineCode>{` function.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`use GuzzleHttp\\\\Promise\\\\Promise;\n\n$promise = new Promise();\n$promise->then(\n    // $onFulfilled\n    function ($value) {\n        echo 'The promise was fulfilled.';\n    },\n    // $onRejected\n    function ($reason) {\n        echo 'The promise was rejected.';\n    }\n);\n`}</code></pre>\n    <p><em parentName=\"p\">{`Resolving`}</em>{` a promise means that you either fulfill a promise with a `}<em parentName=\"p\">{`value`}</em>{` or\nreject a promise with a `}<em parentName=\"p\">{`reason`}</em>{`. Resolving a promise triggers callbacks\nregistered with the promise's `}<inlineCode parentName=\"p\">{`then`}</inlineCode>{` method. These callbacks are triggered\nonly once and in the order in which they were added.`}</p>\n    <h3 {...{\n      \"id\": \"resolving-a-promise\"\n    }}>{`Resolving a Promise`}</h3>\n    <p>{`Promises are fulfilled using the `}<inlineCode parentName=\"p\">{`resolve($value)`}</inlineCode>{` method. Resolving a promise\nwith any value other than a `}<inlineCode parentName=\"p\">{`GuzzleHttp\\\\Promise\\\\RejectedPromise`}</inlineCode>{` will trigger\nall of the onFulfilled callbacks (resolving a promise with a rejected promise\nwill reject the promise and trigger the `}<inlineCode parentName=\"p\">{`$onRejected`}</inlineCode>{` callbacks).`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`use GuzzleHttp\\\\Promise\\\\Promise;\n\n$promise = new Promise();\n$promise\n    ->then(function ($value) {\n        // Return a value and don't break the chain\n        return \"Hello, \" . $value;\n    })\n    // This then is executed after the first then and receives the value\n    // returned from the first then.\n    ->then(function ($value) {\n        echo $value;\n    });\n\n// Resolving the promise triggers the $onFulfilled callbacks and outputs\n// \"Hello, reader.\"\n$promise->resolve('reader.');\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"promise-forwarding\"\n    }}>{`Promise Forwarding`}</h3>\n    <p>{`Promises can be chained one after the other. Each then in the chain is a new\npromise. The return value of a promise is what's forwarded to the next\npromise in the chain. Returning a promise in a `}<inlineCode parentName=\"p\">{`then`}</inlineCode>{` callback will cause the\nsubsequent promises in the chain to only be fulfilled when the returned promise\nhas been fulfilled. The next promise in the chain will be invoked with the\nresolved value of the promise.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`use GuzzleHttp\\\\Promise\\\\Promise;\n\n$promise = new Promise();\n$nextPromise = new Promise();\n\n$promise\n    ->then(function ($value) use ($nextPromise) {\n        echo $value;\n        return $nextPromise;\n    })\n    ->then(function ($value) {\n        echo $value;\n    });\n\n// Triggers the first callback and outputs \"A\"\n$promise->resolve('A');\n// Triggers the second callback and outputs \"B\"\n$nextPromise->resolve('B');\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"promise-rejection\"\n    }}>{`Promise Rejection`}</h3>\n    <p>{`When a promise is rejected, the `}<inlineCode parentName=\"p\">{`$onRejected`}</inlineCode>{` callbacks are invoked with the\nrejection reason.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`use GuzzleHttp\\\\Promise\\\\Promise;\n\n$promise = new Promise();\n$promise->then(null, function ($reason) {\n    echo $reason;\n});\n\n$promise->reject('Error!');\n// Outputs \"Error!\"\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"rejection-forwarding\"\n    }}>{`Rejection Forwarding`}</h3>\n    <p>{`If an exception is thrown in an `}<inlineCode parentName=\"p\">{`$onRejected`}</inlineCode>{` callback, subsequent\n`}<inlineCode parentName=\"p\">{`$onRejected`}</inlineCode>{` callbacks are invoked with the thrown exception as the reason.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`use GuzzleHttp\\\\Promise\\\\Promise;\n\n$promise = new Promise();\n$promise->then(null, function ($reason) {\n    throw new Exception($reason);\n})->then(null, function ($reason) {\n    assert($reason->getMessage() === 'Error!');\n});\n\n$promise->reject('Error!');\n`}</code></pre>\n    <p>{`You can also forward a rejection down the promise chain by returning a\n`}<inlineCode parentName=\"p\">{`GuzzleHttp\\\\Promise\\\\RejectedPromise`}</inlineCode>{` in either an `}<inlineCode parentName=\"p\">{`$onFulfilled`}</inlineCode>{` or\n`}<inlineCode parentName=\"p\">{`$onRejected`}</inlineCode>{` callback.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`use GuzzleHttp\\\\Promise\\\\Promise;\nuse GuzzleHttp\\\\Promise\\\\RejectedPromise;\n\n$promise = new Promise();\n$promise->then(null, function ($reason) {\n    return new RejectedPromise($reason);\n})->then(null, function ($reason) {\n    assert($reason === 'Error!');\n});\n\n$promise->reject('Error!');\n`}</code></pre>\n    <p>{`If an exception is not thrown in a `}<inlineCode parentName=\"p\">{`$onRejected`}</inlineCode>{` callback and the callback\ndoes not return a rejected promise, downstream `}<inlineCode parentName=\"p\">{`$onFulfilled`}</inlineCode>{` callbacks are\ninvoked using the value returned from the `}<inlineCode parentName=\"p\">{`$onRejected`}</inlineCode>{` callback.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`use GuzzleHttp\\\\Promise\\\\Promise;\n\n$promise = new Promise();\n$promise\n    ->then(null, function ($reason) {\n        return \"It's ok\";\n    })\n    ->then(function ($value) {\n        assert($value === \"It's ok\");\n    });\n\n$promise->reject('Error!');\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"synchronous-wait\"\n    }}>{`Synchronous Wait`}</h2>\n    <p>{`You can synchronously force promises to complete using a promise's `}<inlineCode parentName=\"p\">{`wait`}</inlineCode>{`\nmethod. When creating a promise, you can provide a wait function that is used\nto synchronously force a promise to complete. When a wait function is invoked\nit is expected to deliver a value to the promise or reject the promise. If the\nwait function does not deliver a value, then an exception is thrown. The wait\nfunction provided to a promise constructor is invoked when the `}<inlineCode parentName=\"p\">{`wait`}</inlineCode>{` function\nof the promise is called.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$promise = new Promise(function () use (&$promise) {\n    $promise->resolve('foo');\n});\n\n// Calling wait will return the value of the promise.\necho $promise->wait(); // outputs \"foo\"\n`}</code></pre>\n    <p>{`If an exception is encountered while invoking the wait function of a promise,\nthe promise is rejected with the exception and the exception is thrown.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$promise = new Promise(function () use (&$promise) {\n    throw new Exception('foo');\n});\n\n$promise->wait(); // throws the exception.\n`}</code></pre>\n    <p>{`Calling `}<inlineCode parentName=\"p\">{`wait`}</inlineCode>{` on a promise that has been fulfilled will not trigger the wait\nfunction. It will simply return the previously resolved value.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$promise = new Promise(function () { die('this is not called!'); });\n$promise->resolve('foo');\necho $promise->wait(); // outputs \"foo\"\n`}</code></pre>\n    <p>{`Calling `}<inlineCode parentName=\"p\">{`wait`}</inlineCode>{` on a promise that has been rejected will throw an exception. If\nthe rejection reason is an instance of `}<inlineCode parentName=\"p\">{`\\\\Exception`}</inlineCode>{` the reason is thrown.\nOtherwise, a `}<inlineCode parentName=\"p\">{`GuzzleHttp\\\\Promise\\\\RejectionException`}</inlineCode>{` is thrown and the reason\ncan be obtained by calling the `}<inlineCode parentName=\"p\">{`getReason`}</inlineCode>{` method of the exception.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$promise = new Promise();\n$promise->reject('foo');\n$promise->wait();\n`}</code></pre>\n    <blockquote>\n      <p parentName=\"blockquote\">{`PHP Fatal error:  Uncaught exception 'GuzzleHttp\\\\Promise\\\\RejectionException' with message 'The promise was rejected with value: foo'`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"unwrapping-a-promise\"\n    }}>{`Unwrapping a Promise`}</h3>\n    <p>{`When synchronously waiting on a promise, you are joining the state of the\npromise into the current state of execution (i.e., return the value of the\npromise if it was fulfilled or throw an exception if it was rejected). This is\ncalled \"unwrapping\" the promise. Waiting on a promise will by default unwrap\nthe promise state.`}</p>\n    <p>{`You can force a promise to resolve and `}<em parentName=\"p\">{`not`}</em>{` unwrap the state of the promise\nby passing `}<inlineCode parentName=\"p\">{`false`}</inlineCode>{` to the first argument of the `}<inlineCode parentName=\"p\">{`wait`}</inlineCode>{` function:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$promise = new Promise();\n$promise->reject('foo');\n// This will not throw an exception. It simply ensures the promise has\n// been resolved.\n$promise->wait(false);\n`}</code></pre>\n    <p>{`When unwrapping a promise, the resolved value of the promise will be waited\nupon until the unwrapped value is not a promise. This means that if you resolve\npromise A with a promise B and unwrap promise A, the value returned by the\nwait function will be the value delivered to promise B.`}</p>\n    <p><strong parentName=\"p\">{`Note`}</strong>{`: when you do not unwrap the promise, no value is returned.`}</p>\n    <h2 {...{\n      \"id\": \"cancellation\"\n    }}>{`Cancellation`}</h2>\n    <p>{`You can cancel a promise that has not yet been fulfilled using the `}<inlineCode parentName=\"p\">{`cancel()`}</inlineCode>{`\nmethod of a promise. When creating a promise you can provide an optional\ncancel function that when invoked cancels the action of computing a resolution\nof the promise.`}</p>\n    <h2 {...{\n      \"id\": \"api\"\n    }}>{`API`}</h2>\n    <h3 {...{\n      \"id\": \"promise\"\n    }}>{`Promise`}</h3>\n    <p>{`When creating a promise object, you can provide an optional `}<inlineCode parentName=\"p\">{`$waitFn`}</inlineCode>{` and\n`}<inlineCode parentName=\"p\">{`$cancelFn`}</inlineCode>{`. `}<inlineCode parentName=\"p\">{`$waitFn`}</inlineCode>{` is a function that is invoked with no arguments and is\nexpected to resolve the promise. `}<inlineCode parentName=\"p\">{`$cancelFn`}</inlineCode>{` is a function with no arguments\nthat is expected to cancel the computation of a promise. It is invoked when the\n`}<inlineCode parentName=\"p\">{`cancel()`}</inlineCode>{` method of a promise is called.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`use GuzzleHttp\\\\Promise\\\\Promise;\n\n$promise = new Promise(\n    function () use (&$promise) {\n        $promise->resolve('waited');\n    },\n    function () {\n        // do something that will cancel the promise computation (e.g., close\n        // a socket, cancel a database query, etc...)\n    }\n);\n\nassert('waited' === $promise->wait());\n`}</code></pre>\n    <p>{`A promise has the following methods:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`then(callable $onFulfilled, callable $onRejected) : PromiseInterface`}</inlineCode></p>\n        <p parentName=\"li\">{`Appends fulfillment and rejection handlers to the promise, and returns a new promise resolving to the return value of the called handler.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`otherwise(callable $onRejected) : PromiseInterface`}</inlineCode></p>\n        <p parentName=\"li\">{`Appends a rejection handler callback to the promise, and returns a new promise resolving to the return value of the callback if it is called, or to its original fulfillment value if the promise is instead fulfilled.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`wait($unwrap = true) : mixed`}</inlineCode></p>\n        <p parentName=\"li\">{`Synchronously waits on the promise to complete.`}</p>\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`$unwrap`}</inlineCode>{` controls whether or not the value of the promise is returned for a\nfulfilled promise or if an exception is thrown if the promise is rejected.\nThis is set to `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{` by default.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`cancel()`}</inlineCode></p>\n        <p parentName=\"li\">{`Attempts to cancel the promise if possible. The promise being cancelled and\nthe parent most ancestor that has not yet been resolved will also be\ncancelled. Any promises waiting on the cancelled promise to resolve will also\nbe cancelled.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`getState() : string`}</inlineCode></p>\n        <p parentName=\"li\">{`Returns the state of the promise. One of `}<inlineCode parentName=\"p\">{`pending`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`fulfilled`}</inlineCode>{`, or\n`}<inlineCode parentName=\"p\">{`rejected`}</inlineCode>{`.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`resolve($value)`}</inlineCode></p>\n        <p parentName=\"li\">{`Fulfills the promise with the given `}<inlineCode parentName=\"p\">{`$value`}</inlineCode>{`.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`reject($reason)`}</inlineCode></p>\n        <p parentName=\"li\">{`Rejects the promise with the given `}<inlineCode parentName=\"p\">{`$reason`}</inlineCode>{`.`}</p>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"fulfilledpromise\"\n    }}>{`FulfilledPromise`}</h3>\n    <p>{`A fulfilled promise can be created to represent a promise that has been\nfulfilled.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`use GuzzleHttp\\\\Promise\\\\FulfilledPromise;\n\n$promise = new FulfilledPromise('value');\n\n// Fulfilled callbacks are immediately invoked.\n$promise->then(function ($value) {\n    echo $value;\n});\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"rejectedpromise\"\n    }}>{`RejectedPromise`}</h3>\n    <p>{`A rejected promise can be created to represent a promise that has been\nrejected.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`use GuzzleHttp\\\\Promise\\\\RejectedPromise;\n\n$promise = new RejectedPromise('Error');\n\n// Rejected callbacks are immediately invoked.\n$promise->then(null, function ($reason) {\n    echo $reason;\n});\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"promise-interoperability\"\n    }}>{`Promise Interoperability`}</h2>\n    <p>{`This library works with foreign promises that have a `}<inlineCode parentName=\"p\">{`then`}</inlineCode>{` method. This means\nyou can use Guzzle promises with `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/reactphp/promise\"\n      }}>{`React promises`}</a>{`\nfor example. When a foreign promise is returned inside of a then method\ncallback, promise resolution will occur recursively.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`// Create a React promise\n$deferred = new React\\\\Promise\\\\Deferred();\n$reactPromise = $deferred->promise();\n\n// Create a Guzzle promise that is fulfilled with a React promise.\n$guzzlePromise = new GuzzleHttp\\\\Promise\\\\Promise();\n$guzzlePromise->then(function ($value) use ($reactPromise) {\n    // Do something something with the value...\n    // Return the React promise\n    return $reactPromise;\n});\n`}</code></pre>\n    <p>{`Please note that wait and cancel chaining is no longer possible when forwarding\na foreign promise. You will need to wrap a third-party promise with a Guzzle\npromise in order to utilize wait and cancel functions with foreign promises.`}</p>\n    <h3 {...{\n      \"id\": \"event-loop-integration\"\n    }}>{`Event Loop Integration`}</h3>\n    <p>{`In order to keep the stack size constant, Guzzle promises are resolved\nasynchronously using a task queue. When waiting on promises synchronously, the\ntask queue will be automatically run to ensure that the blocking promise and\nany forwarded promises are resolved. When using promises asynchronously in an\nevent loop, you will need to run the task queue on each tick of the loop. If\nyou do not run the task queue, then promises will not be resolved.`}</p>\n    <p>{`You can run the task queue using the `}<inlineCode parentName=\"p\">{`run()`}</inlineCode>{` method of the global task queue\ninstance.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`// Get the global task queue\n$queue = GuzzleHttp\\\\Promise\\\\Utils::queue();\n$queue->run();\n`}</code></pre>\n    <p>{`For example, you could use Guzzle promises with React using a periodic timer:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$loop = React\\\\EventLoop\\\\Factory::create();\n$loop->addPeriodicTimer(0, [$queue, 'run']);\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"implementation-notes\"\n    }}>{`Implementation Notes`}</h2>\n    <h3 {...{\n      \"id\": \"promise-resolution-and-chaining-is-handled-iteratively\"\n    }}>{`Promise Resolution and Chaining is Handled Iteratively`}</h3>\n    <p>{`By shuffling pending handlers from one owner to another, promises are\nresolved iteratively, allowing for \"infinite\" then chaining.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\nrequire 'vendor/autoload.php';\n\nuse GuzzleHttp\\\\Promise\\\\Promise;\n\n$parent = new Promise();\n$p = $parent;\n\nfor ($i = 0; $i < 1000; $i++) {\n    $p = $p->then(function ($v) {\n        // The stack size remains constant (a good thing)\n        echo xdebug_get_stack_depth() . ', ';\n        return $v + 1;\n    });\n}\n\n$parent->resolve(0);\nvar_dump($p->wait()); // int(1000)\n\n`}</code></pre>\n    <p>{`When a promise is fulfilled or rejected with a non-promise value, the promise\nthen takes ownership of the handlers of each child promise and delivers values\ndown the chain without using recursion.`}</p>\n    <p>{`When a promise is resolved with another promise, the original promise transfers\nall of its pending handlers to the new promise. When the new promise is\neventually resolved, all of the pending handlers are delivered the forwarded\nvalue.`}</p>\n    <h3 {...{\n      \"id\": \"a-promise-is-the-deferred\"\n    }}>{`A Promise is the Deferred`}</h3>\n    <p>{`Some promise libraries implement promises using a deferred object to represent\na computation and a promise object to represent the delivery of the result of\nthe computation. This is a nice separation of computation and delivery because\nconsumers of the promise cannot modify the value that will be eventually\ndelivered.`}</p>\n    <p>{`One side effect of being able to implement promise resolution and chaining\niteratively is that you need to be able for one promise to reach into the state\nof another promise to shuffle around ownership of handlers. In order to achieve\nthis without making the handlers of a promise publicly mutable, a promise is\nalso the deferred value, allowing promises of the same parent class to reach\ninto and modify the private properties of promises of the same type. While this\ndoes allow consumers of the value to modify the resolution or rejection of the\ndeferred, it is a small price to pay for keeping the stack size constant.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$promise = new Promise();\n$promise->then(function ($value) { echo $value; });\n// The promise is the deferred value, so you can deliver a value to it.\n$promise->resolve('foo');\n// prints \"foo\"\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"upgrading-from-function-api\"\n    }}>{`Upgrading from Function API`}</h2>\n    <p>{`A static API was first introduced in 1.4.0, in order to mitigate problems with\nfunctions conflicting between global and local copies of the package. The\nfunction API was removed in 2.0.0. A migration table has been provided here for\nyour convenience:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Original Function`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Replacement Method`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`queue`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Utils::queue`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`task`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Utils::task`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`promise_for`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Create::promiseFor`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`rejection_for`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Create::rejectionFor`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`exception_for`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Create::exceptionFor`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`iter_for`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Create::iterFor`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`inspect`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Utils::inspect`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`inspect_all`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Utils::inspectAll`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`unwrap`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Utils::unwrap`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`all`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Utils::all`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`some`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Utils::some`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`any`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Utils::any`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`settle`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Utils::settle`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`each`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Each::of`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`each_limit`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Each::ofLimit`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`each_limit_all`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Each::ofLimitAll`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`!is_fulfilled`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Is::pending`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`is_fulfilled`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Is::fulfilled`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`is_rejected`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Is::rejected`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`is_settled`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Is::settled`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`coroutine`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Coroutine::of`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"security\"\n    }}>{`Security`}</h2>\n    <p>{`If you discover a security vulnerability within this package, please send an email to `}<a parentName=\"p\" {...{\n        \"href\": \"mailto:security@tidelift.com.\"\n      }}>{`security@tidelift.com.`}</a>{` All security vulnerabilities will be promptly addressed. Please do not disclose security-related issues publicly until a fix has been announced. Please see `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/guzzle/promises/security/policy\"\n      }}>{`Security Policy`}</a>{` for more information.`}</p>\n    <h2 {...{\n      \"id\": \"license\"\n    }}>{`License`}</h2>\n    <p>{`Guzzle is made available under the MIT License (MIT). Please see `}<a parentName=\"p\" {...{\n        \"href\": \"LICENSE\"\n      }}>{`License File`}</a>{` for more information.`}</p>\n    <h2 {...{\n      \"id\": \"for-enterprise\"\n    }}>{`For Enterprise`}</h2>\n    <p>{`Available as part of the Tidelift Subscription`}</p>\n    <p>{`The maintainers of Guzzle and thousands of other packages are working with Tidelift to deliver commercial support and maintenance for the open source dependencies you use to build your applications. Save time, reduce risk, and improve code health, while paying the maintainers of the exact dependencies you use. `}<a parentName=\"p\" {...{\n        \"href\": \"https://tidelift.com/subscription/pkg/packagist-guzzlehttp-promises?utm_source=packagist-guzzlehttp-promises&utm_medium=referral&utm_campaign=enterprise&utm_term=repo\"\n      }}>{`Learn more.`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;"}}